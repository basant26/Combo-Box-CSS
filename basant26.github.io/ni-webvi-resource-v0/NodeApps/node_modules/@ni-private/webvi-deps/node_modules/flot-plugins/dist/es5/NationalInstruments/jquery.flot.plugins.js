"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var i=[],o=!0,n=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);o=!0);}catch(t){n=!0,r=t}finally{try{o||null==s.return||s.return()}finally{if(n)throw r}}return i}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var i=[],o=!0,n=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);o=!0);}catch(t){n=!0,r=t}finally{try{o||null==s.return||s.return()}finally{if(n)throw r}}return i}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var i=[],o=!0,n=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);o=!0);}catch(t){n=!0,r=t}finally{try{o||null==s.return||s.return()}finally{if(n)throw r}}return i}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var i=[],o=!0,n=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);o=!0);}catch(t){n=!0,r=t}finally{try{o||null==s.return||s.return()}finally{if(n)throw r}}return i}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(t,e,i){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var o=_superPropBase(t,e);if(o){var n=Object.getOwnPropertyDescriptor(o,e);return n.get?n.get.call(i):n.value}})(t,e,i||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(t){function i(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(i,t)})(t)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _construct(t,e,i){return _construct=isNativeReflectConstruct()?Reflect.construct:function(t,e,i){var o=[null];o.push.apply(o,e);var n=Function.bind.apply(t,o),r=new n;return i&&_setPrototypeOf(r,i.prototype),r},_construct.apply(null,arguments)}function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){function i(){this.pluginName="scattergraph",this.pluginVersion="1.0",this.defaultOptions={series:{scattergraph:{data:[],show:!1,lineWidth:2,filled:!1,drawLines:!1,color:"black",shape:"circle",size:5}}};var t=new Map([[0,"red"],[1,"green"],[2,"blue"],[3,"cyan"],[4,"yellow"],[5,"magenta"],[6,"salmon"],[7,"teal"],[8,"grey"],[9,"black"]]),e=new Map([[0,"circle"],[1,"square"],[2,"triangle_n"],[3,"triangle_s"],[4,"triangle_e"],[5,"triangle_w"],[6,"cross_v"],[7,"cross_d"],[8,"diamond"],[9,"asterisk"]]),i=new Map([[0,1],[1,2],[2,3],[3,4],[4,5],[5,9],[6,14],[7,23],[8,37],[9,60]]);this.init=function(o){function n(t,e,i,o){if(!0===t.getOptions().series.scattergraph.show&&i[0]){if(!Array.isArray(i[0])&&Array.isArray(i[0].x))E=!0,R=i[0].x.length;else if(Array.isArray(i[0])&&Array.isArray(i[0][0])&&!Array.isArray(i[0][0][0]))z=!0,R=i[0].length;else{if(!Array.isArray(i[0])||"object"!==_typeof(i[0][0]))return void console.log("unknown data type for scatter graph");P=!0,R=i[0].length}for(var n,r,a=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,u=0;u<R;u++)P?(n=i[0][u].x,r=i[0][u].y):E?(n=i[0].x[u],r=i[0].y[u]):z&&(n=i[0][u][0],r=i[0][u][1]),n>a&&(a=n),r>s&&(s=r),n<l&&(l=n),r<h&&(h=r);o.pointsize=2,o.points.length=0,o.points.push(l,h),o.points.push(a,s),o.format=[{x:!0,y:!1,number:!0,computeRange:!0},{x:!1,y:!0,number:!0,computeRange:!0}]}}function r(o,r){r.series.scattergraph.show&&(r.series.scattergraph.colors?"string"==typeof r.series.scattergraph.colors?r.series.scattergraph.colors=a(JSON.parse(r.series.scattergraph.colors)):Array.isArray(r.series.scattergraph.colors)?r.series.scattergraph.colors=a(r.series.scattergraph.colors):"function"!=typeof r.series.scattergraph.colors&&console.log("colors is unknown type"):r.series.scattergraph.colors=t,r.series.scattergraph.sizes?"string"==typeof r.series.scattergraph.sizes?r.series.scattergraph.sizes=u(JSON.parse(r.series.scattergraph.sizes)):Array.isArray(r.series.scattergraph.sizes)?r.series.scattergraph.sizes=u(r.series.scattergraph.sizes):"function"!=typeof r.series.scattergraph.sizes&&console.log("sizes is unknown type"):r.series.scattergraph.sizes=i,r.series.scattergraph.shapes?"string"==typeof r.series.scattergraph.shapes?r.series.scattergraph.shapes=h(JSON.parse(r.series.scattergraph.shapes)):Array.isArray(r.series.scattergraph.shapes)?r.series.scattergraph.shapes=h(r.series.scattergraph.shapes):"function"!=typeof r.series.scattergraph.shapes&&console.log("sizes is unknown type"):r.series.scattergraph.shapes=e,o.hooks.drawSeries.push(S),o.hooks.processRawData.push(n),L=r)}function a(t){var e,i=new Map;for(e=0;e<t.length;e++)i.set(t[e].value,t[e].color);return i}function s(t){var e;return void 0!==t&&("function"==typeof L.series.scattergraph.colors?e=L.series.scattergraph.colors(t):L.series.scattergraph.colors&&(e=L.series.scattergraph.colors.get(t))),e||L.series.scattergraph.color}function h(t){var e,i=new Map;for(e=0;e<t.length;e++)i.set(t[e].value,t[e].shape);return i}function l(t){var e;return void 0!==t&&("function"==typeof L.series.scattergraph.shapes?e=L.series.scattergraph.shapes(t):L.series.scattergraph.shapes&&(e=L.series.scattergraph.shapes.get(t))),e||L.series.scattergraph.shape}function u(t){var e,i=new Map;for(e=0;e<t.length;e++)i.set(t[e].value,parseFloat(t[e].size));return i}function d(t){var e;return void 0!==t&&("function"==typeof L.series.scattergraph.sizes?e=L.series.scattergraph.sizes(t):L.series.scattergraph.sizes&&(e=L.series.scattergraph.sizes.get(t))),void 0===e?L.series.scattergraph.size:e}function c(t,e,i,o,n,r,a,s){t.save(),t.strokeStyle=s,t.beginPath(),t.moveTo(e.p2c(o),i.p2c(n)),t.lineTo(e.p2c(r),i.p2c(a)),t.stroke(),t.restore()}function f(t,e,i,o,n){t.beginPath(),t.arc(e,i,o/2,0,2*Math.PI),n?t.fill():t.stroke()}function p(t,e,i,o,n){n?t.fillRect(e-o/2,i-o/2,o,o):t.strokeRect(e-o/2,i-o/2,o,o)}function g(t,e,i,o,n){var r=o*(Math.sqrt(3)/2);t.beginPath(),t.moveTo(e,i-r/2),t.lineTo(e-o/2,i+r/2),t.lineTo(e+o/2,i+r/2),t.lineTo(e,i-r/2),t.lineTo(e-o/2,i+r/2),n?t.fill():t.stroke()}function m(t,e,i,o,n){var r=o*(Math.sqrt(3)/2);t.beginPath(),t.moveTo(e,i+r/2),t.lineTo(e-o/2,i-r/2),t.lineTo(e+o/2,i-r/2),t.lineTo(e,i+r/2),t.lineTo(e-o/2,i-r/2),n?t.fill():t.stroke()}function v(t,e,i,o,n){var r=o*(Math.sqrt(3)/2);t.beginPath(),t.moveTo(e+r/2,i),t.lineTo(e-r/2,i+r/2),t.lineTo(e-r/2,i-r/2),t.lineTo(e+r/2,i),t.lineTo(e-r/2,i+r/2),n?t.fill():t.stroke()}function b(t,e,i,o,n){var r=o*(Math.sqrt(3)/2);t.beginPath(),t.moveTo(e-r/2,i),t.lineTo(e+r/2,i+r/2),t.lineTo(e+r/2,i-r/2),t.lineTo(e-r/2,i),t.lineTo(e+r/2,i+r/2),n?t.fill():t.stroke()}function y(t,e,i,o){var n=o;t.beginPath(),t.moveTo(e,i-n/2),t.lineTo(e,i+n/2),t.moveTo(e-n/2,i),t.lineTo(e+n/2,i),t.stroke()}function x(t,e,i,o){var n=o;t.beginPath(),t.moveTo(e-n/2,i-n/2),t.lineTo(e+n/2,i+n/2),t.moveTo(e-n/2,i+n/2),t.lineTo(e+n/2,i-n/2),t.stroke()}function w(t,e,i,o,n){var r=o;t.beginPath(),t.moveTo(e,i-r/2),t.lineTo(e+r/2,i),t.lineTo(e,i+r/2),t.lineTo(e-r/2,i),t.lineTo(e,i-r/2),t.lineTo(e+r/2,i),n?t.fill():t.stroke()}function _(t,e,i,o){var n=o,r=n/(2*Math.sqrt(2));t.beginPath(),t.moveTo(e-r,i-r),t.lineTo(e+r,i+r),t.moveTo(e-r,i+r),t.lineTo(e+r,i-r),t.moveTo(e,i-n/2),t.lineTo(e,i+n/2),t.moveTo(e-n/2,i),t.lineTo(e+n/2,i),t.stroke()}function k(t,e,i,o,n,r,a,s,h,l,u,d){if(void 0!==e&&void 0!==i)switch(t.strokeStyle=s,t.fillStyle=s,t.lineWidth=u,t.moveTo(o.p2c(e)+r,n.p2c(i)+a),h){case"circle":f(t,o.p2c(e),n.p2c(i),l,d);break;case"square":p(t,o.p2c(e),n.p2c(i),l,d);break;case"triangle_n":g(t,o.p2c(e),n.p2c(i),l,d);break;case"triangle_s":m(t,o.p2c(e),n.p2c(i),l,d);break;case"triangle_e":v(t,o.p2c(e),n.p2c(i),l,d);break;case"triangle_w":b(t,o.p2c(e),n.p2c(i),l,d);break;case"cross_v":y(t,o.p2c(e),n.p2c(i),l,d);break;case"cross_d":x(t,o.p2c(e),n.p2c(i),l);break;case"diamond":w(t,o.p2c(e),n.p2c(i),l,d);break;case"asterisk":_(t,o.p2c(e),n.p2c(i),l)}}function T(t,e,i,o,n,r,a){var s=!1,h=Math.round(t.xaxis.p2c(e)),l=Math.round(t.yaxis.p2c(i)),u={x:h,y:l},d=a.get(u);if(d){for(var c=0;c<d.length;c++)d[c].color===o&&d[c].shape===n&&d[c].size===r&&(s=!0);d.push({color:o,size:r,shape:n}),a.set(u,d)}else a.set(u,[{color:o,size:r,shape:n}]);return s}function S(t,e,i){var o,n;if(i.data&&Array.isArray(i.data)&&0!==i.data.length){var r=new Map,a=t.getPlotOffset();e.save(),e.translate(a.left,a.top);for(var h=0;h<R;h++){var u,f,p,g,m;P?(u=i.data[0][h].x,f=i.data[0][h].y,p=s(i.data[0][h].color),g=l(i.data[0][h].shape),m=d(i.data[0][h].size)):E?(u=i.data[0].x[h],f=i.data[0].y[h],p=s(i.data[0].color?i.data[0].color[h]:void 0),g=l(i.data[0].shape?i.data[0].shape[h]:void 0),m=d(i.data[0].size?i.data[0].size[h]:void 0)):z&&(u=i.data[0][h][0],f=i.data[0][h][1],p=s(i.data[0][h][2]),g=l(i.data[0][h][3]),m=d(i.data[0][h][4])),"transparent"===p.toLowerCase()||"none"===g.toLowerCase()||0===m||!L.series.scattergraph.drawLines&&T(i,u,f,p,g,m,r)||(k(e,u,f,i.xaxis,i.yaxis,0,0,p,g,m,L.series.scattergraph.lineWidth,L.series.scattergraph.filled),h>0&&L.series.scattergraph.drawLines&&c(e,i.xaxis,i.yaxis,o,n,u,f,i.color),o=u,n=f)}e.restore()}}var R,L=null,P=!1,z=!1,E=!1;o.hooks.processOptions.push(r)}}var o=new i;e.plot.plugins.push({init:o.init,options:o.defaultOptions,name:o.pluginName,version:o.pluginVersion}),e.plot.scattergraph=o}(0,jQuery),function(t){function e(t){t.addEventListener("mousemove",i,!1),t.addEventListener("touchmove",i,!1),t.addEventListener("mouseup",o,!1),t.addEventListener("touchend",o,!1)}function i(t){if(g){if(0===t.buttons)return void o(t);var e=c(t),i={x:e.X-g.deltaHandlingX,y:e.Y-g.deltaHandlingY},n=r(t),s=a(n),l=s.eventHolder,d=!1;if(g.selectedElement.constraintFunction){var f=g.selectedElement.constraintFunction(e.X,e.Y,g.x,g.y,i.x,i.y),p=_slicedToArray(f,3);e.X=p[0],e.Y=p[1],d=p[2]}if(!d){var m=g.selectedElement.getCTM(),v=e.X-g.x,b=e.Y-g.y;m.e+=v,m.f+=b,g.selectedElement.transform.baseVal.getItem(0).setMatrix(m)}g.x=e.X,g.y=e.Y,h(g.selectedElement),t.preventDefault(),t.stopPropagation(),u("thumbmove",t,l)}}function o(t){var e=r(t),i=a(e),o=i.eventHolder;g&&(g=null,i.style.pointerEvents="none",o.dispatchEvent(new CustomEvent("thumbmoveend",{detail:t})))}function n(t){var e=r(t),i=a(e),o=i.eventHolder;if(g=null,e&&-1!==e.getAttribute("class").indexOf("draggable")){var n=c(t),s=e.getBoundingClientRect(),h=document.documentElement,l=(window.pageXOffset||h.scrollLeft)-(h.clientLeft||0),d=(window.pageYOffset||h.scrollTop)-(h.clientTop||0);g={selectedElement:e,x:n.X,y:n.Y,deltaHandlingX:n.X-(s.left+s.right)/2-l,deltaHandlingY:n.Y-(s.top+s.bottom)/2-d},i.style.pointerEvents="all"}g&&u("thumbmovestart",t,o)}function r(t){var e=t.target,i=e.getAttribute("class");return i&&i.includes("interactionLayer")?e.parentNode:e}function a(t){return"svg"===t.tagName?t:"g"===t.tagName?t.parentNode:null}function s(t){var e=r(t),i=[];e&&-1!==e.getAttribute("class").indexOf("thumb")&&(i=l(e),i.length>0&&h(i[0]))}function h(t){t.parentNode.appendChild(t)}function l(t){var e=t.getBoundingClientRect(),i=e.left,o=e.right,n=e.top,r=e.bottom,a=t.parentNode;return Array.prototype.slice.call(a.childNodes,0).filter(function(t){var e=t.getBoundingClientRect(),a=e.left,s=e.right,h=e.top,l=e.bottom;return e.width>0&&e.height>0&&(i<s&&o>a&&n<l&&r>h)})}function u(t,e,i){var o=c(e),n=new CustomEvent(t,{detail:e});n.pageX=o.X-g.deltaHandlingX,n.pageY=o.Y-g.deltaHandlingY,n.selectedThumb=g.selectedElement,i.dispatchEvent(n)}function d(t){var e=document.documentElement;return{X:t.clientX+(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0),Y:t.clientY+(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}}function c(t){return t.touches?{X:t.touches[0].pageX,Y:t.touches[0].pageY}:d(t)}function f(t){Array.prototype.forEach.call(t.childNodes,function(t){t.classList.contains("thumb")&&(t.removeEventListener("mousedown",n),t.removeEventListener("touchstart",n))}),t.removeEventListener("mousemove",i),t.removeEventListener("touchmove",i),t.removeEventListener("mouseup",o),t.removeEventListener("touchend",o)}function p(t,e){var i=e-8,o=window.getComputedStyle(t).fontSize.replace("px",""),n=t.textContent,r=n.trim().split(/\s+/);if(r.length>1){t.textContent="";var a=document.createElementNS("http://www.w3.org/2000/svg","tspan");a.setAttribute("x",t.getAttribute("x")),a.setAttribute("y",t.getAttribute("y")),a.setAttribute("pointer-events","none"),a.setAttribute("font-size",o),a.textContent=r[0],t.appendChild(a);for(var s=1;s<r.length;s++){var h=a.firstChild.textContent.length;a.firstChild.textContent+=" "+r[s],a.getComputedTextLength()>i&&(a.firstChild.textContent=a.firstChild.textContent.slice(0,h),a=a.cloneNode(!0),t.appendChild(a),a.textContent=r[s])}for(var l=0;l<t.children.length;l++){var u=-(o*(t.children.length/2-l)-o/2);t.children[l].setAttribute("dy",u)}}}t.thumb={};var g;t.thumb.createSVGLayer=function(t,i){if(t&&t.find(".flot-thumbs")[0])return t.find(".flot-thumbs")[0].firstChild;var o=document.createElement("div");o.className="flot-thumbs",o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.style.width="100%",o.style.height="100%",o.style.pointerEvents="none",t?t.append(o):document.body.appendChild(o);var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"width","100%"),n.setAttributeNS(null,"height","100%");var r=window.getComputedStyle(o).getPropertyValue("--customIcon");r=(r||"").trim();var a=window.getComputedStyle(o).getPropertyValue("--customIconTextBoundary");a=(a||"").trim();var s=r||'<symbol id="round" viewBox="0 0 50 50"><polyline points="25,0 40,20 10,20 25,0"></polyline><circle cx="25" cy="25" r="20"/></symbol>',h=a;""===a&&""===r&&(h='<symbol id="round" viewBox="0 0 50 50"><circle cx="25" cy="25" r="20"/></symbol>'),""===h&&(h=s);var l='<defs xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+s+h+'<symbol id="l_round" viewBox="0 0 50 50"><use xlink:href="#round" x="0" y="0" width="50" height="50" transform="rotate(90 25 25)"/></symbol><symbol id="r_round" viewBox="0 0 50 50"><use xlink:href="#round" x="0" y="0" width="50" height="50" transform="rotate(270 25 25)"/></symbol><symbol id="b_round" viewBox="0 0 50 50"><use xlink:href="#round" x="0" y="0" width="50" height="50" transform="rotate(0 25 25)"/></symbol><symbol id="t_round" viewBox="0 0 50 50"><use xlink:href="#round" x="0" y="0" width="50" height="50" transform="rotate(180 25 25)"/></symbol><symbol id="l_tb" viewBox="0 0 50 50"><use xlink:href="#tb" x="0" y="0" width="50" height="50" transform="rotate(90 25 25)" /></symbol><symbol id="r_tb" viewBox="0 0 50 50"><use xlink:href="#tb" x="0" y="0" width="50" height="50" transform="rotate(270 25 25)" /></symbol><symbol id="b_tb" viewBox="0 0 50 50"><use xlink:href="#tb" x="0" y="0" width="50" height="50" transform="rotate(0 25 25)" /></symbol><symbol id="t_tb" viewBox="0 0 50 50"><use xlink:href="#tb" x="0" y="0" width="50" height="50" transform="rotate(180 25 25)" /></symbol></defs>',u=(new DOMParser).parseFromString(l,"image/svg+xml"),d=document.importNode(u.documentElement,!0);return d.children[0].setAttribute("id","round"),d.children[1].setAttribute("id","tb"),n.appendChild(d),o.appendChild(n),n.eventHolder=i||document,e(n),n},t.thumb.createThumb=function(e){function i(t,e){t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),t.setAttributeNS("http://www.w3.org/1999/xlink","href",e)}var o={size:e.size||20,x:e.x||0,y:e.y||0,svgRoot:e.svgRoot,shape:e.shape||"bottom",abbreviation:e.abbreviation||"",constraintFunction:e.constraintFunction,classList:e.classList?e.classList.slice():["draggable"],offset:e.offset||"0",fill:e.fill},r=document.createElementNS("http://www.w3.org/2000/svg","use"),a=document.createElementNS("http://www.w3.org/2000/svg","text"),h=document.createElementNS("http://www.w3.org/2000/svg","use"),l=document.createElementNS("http://www.w3.org/2000/svg","g"),u=document.createElementNS("http://www.w3.org/2000/svg","rect"),d=o.svgRoot,c=o.size,f=o.x,g=o.y,m="",v=0,b=0;switch(o.shape){case"left":m="y",o.classList.push("left"),l.shape="left",i(r,"#l_round"),i(h,"#l_tb"),v="-"===o.offset[0]?o.offset.substr(1):"-"+o.offset;break;case"right":m="y",o.classList.push("right"),l.shape="right",i(r,"#r_round"),i(h,"#r_tb"),v=o.offset;break;case"bottom":m="x",o.classList.push("bottom"),l.shape="bottom",i(r,"#b_round"),i(h,"#b_tb"),b=o.offset;break;case"top":m="x",o.classList.push("top"),l.shape="top",i(r,"#t_round"),i(h,"#t_tb"),b="-"===o.offset[0]?o.offset.substr(1):"-"+o.offset}if(r.setAttributeNS(null,"width",2*c),r.setAttributeNS(null,"height",2*c),r.setAttributeNS(null,"transform","translate("+-c+" "+-c+")"),r.setAttributeNS(null,"x",v),r.setAttributeNS(null,"y",b),r.setAttribute("class","thumbIcon"),r.style.fill=o.fill,h.setAttributeNS(null,"width",2*c),h.setAttributeNS(null,"height",2*c),h.setAttributeNS(null,"transform","translate("+-c+" "+-c+")"),h.setAttributeNS(null,"x",v),h.setAttributeNS(null,"y",b),a.setAttributeNS(null,"text-anchor","middle"),a.setAttributeNS(null,"dominant-baseline","middle"),a.setAttributeNS(null,"lengthAdjust","spacingAndGlyphs"),a.setAttribute("class","thumbLabel"),a.textContent=o.abbreviation,a.style.pointerEvents="none",l.appendChild(r),l.appendChild(h),l.appendChild(a),l.setAttributeNS(null,"transform","translate("+f+" "+g+")"),l.setAttribute("class","thumb"),l.classList.add(m),o.classList)for(var y=0;y<o.classList.length;y++)""!==o.classList[y]&&l.classList.add(o.classList[y]);l.style.pointerEvents="all",l.addEventListener("mousedown",n,!1),l.addEventListener("touchstart",n,!1),t(l).click(s),l.constraintFunction=o.constraintFunction,d.appendChild(l);var x=r.getBBox();u.setAttributeNS(null,"width",x.width),u.setAttributeNS(null,"height",x.height),u.setAttributeNS(null,"x",x.x),u.setAttributeNS(null,"y",x.y),u.setAttributeNS(null,"transform","translate("+-c+" "+-c+")"),u.setAttribute("pointer-events","all"),u.classList.add("interactionLayer"),u.style.fill="transparent",u.style.stroke="transparent",l.appendChild(u);var w=h.getBBox(),_=w.x+w.width/2,k=w.y+w.height/2;return l.removeChild(h),a.setAttributeNS(null,"x",_),a.setAttributeNS(null,"y",k),a.setAttributeNS(null,"transform","translate("+-c+" "+-c+")"),/word/.test(window.getComputedStyle(a).getPropertyValue("--wrap"))?p(a,2*c):a.setAttributeNS(null,"textLength",c),l},t.thumb.updateComputedXPosition=function(t,e){var i=t.getCTM(),o="matrix("+i.a+" "+i.b+" "+i.c+" "+i.d+" "+e+" "+i.f+")";t.setAttribute("transform",o)},t.thumb.updateComputedYPosition=function(t,e){var i=t.getCTM(),o="matrix("+i.a+" "+i.b+" "+i.c+" "+i.d+" "+i.e+" "+e+")";t.setAttribute("transform",o)},t.thumb.setHidden=function(t,e){t.style.display=e?"none":"inline"},t.thumb.shutdown=function(t){g=null,f(t)}}(jQuery),function(t){function e(e){function s(t){var e=h();return l(e,t),i(t,e)}function h(){return{name:"unnamed "+ot.length,position:{relativeX:.5,relativeY:.5,x:void 0,y:void 0},mousePosition:{relativeX:void 0,relativeY:void 0},x:0,y:0,valign:"below",halign:"right",show:!0,selected:!1,highlighted:!1,mode:"xy",showIntersections:!1,showLabel:!1,showValues:!0,color:"gray",fontSize:"10px",fontFamily:"sans-serif",fontStyle:"",fontWeight:"",lineWidth:1,movable:!0,dashes:[],intersectionColor:"darkgray",intersectionLabelPosition:"bottom-right",snapToPlot:void 0,interpolate:!1,defaultxaxis:1,defaultyaxis:1,symbolSize:8,showThumbs:"none",thumbAbbreviation:"C"+ot.length,thumbClassList:["draggable"],thumbs:[],thumbColor:void 0,horizontalThumbConstrain:void 0,verticalThumbConstrain:void 0}}function l(t,e){g(t,e),v(t,e)}function u(t,e){return"x"===t&&-1!==e.search(/[lr]/)||("y"===t&&-1!==e.search(/[tb]/)||"xy"===t&&-1!==e.search(/l\s*r|r\s*l|t\s*b|b\s*t/))}function f(t,e){if(e.mode&&e.showThumbs){if(u(e.mode,e.showThumbs)){switch(console.log("showThumbs ".concat(e.showThumbs," doesn't match mode ").concat(e.mode,".")),e.mode){case"x":e.showThumbs="t";break;case"y":e.showThumbs="r";break;case"xy":e.showThumbs="tr"}console.log("showThumbs is coerced to ".concat(e.showThumbs))}}else e.mode?u(e.mode,t.showThumbs)&&(console.log("mode doesn't match the existing showThumbs. It will be ignored"),delete e.mode):e.showThumbs&&u(t.mode,e.showThumbs)&&(console.log("showThumbs doesn't match the existing mode. It will be ignored"),delete e.showThumbs)}function g(t,e){if("none"!==e.showThumbs&&(f(t,e),e.showThumbs))for(var i,o=e.showThumbs.split("").map(function(t){return A[t]}),n=0;n<t.thumbs.length;n++)o.includes(t.thumbs[n].shape)||(i=t.thumbs[n],t.thumbs[n]=null,t._createThumbs=!0,T("thumbWillBeRemoved",{current:i}),it.removeChild(i),st.delete(i))}function v(t,e){if(0!==t.thumbs.length){var i=void 0!==e.show?e.show:t.show,o=void 0!==e.showThumbs?e.showThumbs:t.showThumbs,n=void 0!==e.show&&e.show!==t.show,r=void 0!==e.showThumbs&&(e.showThumbs!==t.showThumbs&&("none"===e.showThumbs||"none"===t.showThumbs));t.triggerThumbVisibilityChanged=n&&"none"!==o||r&&i}}function T(t,i){var o=new CustomEvent(t,{detail:i});e.getPlaceholder()[0].dispatchEvent(o)}function S(t,e){t.triggerThumbVisibilityChanged&&t.thumbs.forEach(function(t){T("thumbVisibilityChanged",{visible:e,current:t})})}function z(){rt=O.relative,ot.forEach(function(t){if(!isNaN(t.x)&&!isNaN(t.y)){var i={relativeX:t.position.relativeX||t.x/e.width(),relativeY:t.position.relativeY||t.y/e.height(),x:void 0,y:void 0};isNaN(i.relativeX)||isNaN(i.relativeY)||(t.position=i)}})}function M(){rt=O.axis,ot.forEach(function(t){if(t.mousePosition={},void 0===t.position.x){var i=b(e,t);t.position.x=i.c2p?i.c2p(t.x):void 0}if(void 0===t.position.y){var o=y(e,t);t.position.y=o.c2p?o.c2p(t.y):void 0}t.position.relativeX=void 0,t.position.relativeY=void 0})}function I(t,e){var i={cursor:e.name,points:[]};return e.interpolate?N(t,e,i):H(t,e,i),i}function H(t,e,i){var o,n;rt===O.axis?(o=e.x,n=e.y):(o=e.mousePosition.relativeX*t.width(),n=e.mousePosition.relativeY*t.height());var r=t.findNearbyItem(o,n,function(t){return-1===e.snapToPlot||t===e.snapToPlot},Number.MAX_VALUE,function(t,e){return at===C.x?t:t*t+e*e*.025});if(r){var a=t.getData(),s=a[r.seriesIndex].datapoints.pointsize,h=r.dataIndex*s;i.points.push({x:r.datapoint[0],y:r.datapoint[1],leftPoint:[h-s,h-s+1],rightPoint:[h,h+1],seriesIndex:r.seriesIndex})}}function N(t,e,i){var o=t.c2p({left:e.x,top:e.y}),n=t.getAxes();if(!(o.x<n.xaxis.min||o.x>n.xaxis.max||o.y<n.yaxis.min||o.y>n.yaxis.max)){var r=t.findNearbyInterpolationPoint(o.x,o.y,function(t){return-1===e.snapToPlot||t===e.snapToPlot});r&&i.points.push({x:r.datapoint[0],y:r.datapoint[1],leftPoint:r.leftPoint,rightPoint:r.rightPoint,seriesIndex:r.seriesIndex})}}function D(t){function i(t){return t.getAttribute("class").includes("draggable")}function o(t){var e=t,i=t.getAttribute("class");return i.includes("interactionLayer")&&(e=t.parentNode,i=e.getAttribute("class")),i.includes("thumb")?e:null}ut(ot)||dt(ot).filter(function(t){return!0===t.movable}).forEach(function(n){n.thumbs.filter(i).filter(function(e){return e===o(t.detail.target)}).forEach(function(i){var o=n;o&&(i.classList.contains("x")?o.dragmode="x":o.dragmode="y",o.selected=!0,o.thumbmove=!0,"x"===o.mode?e.getPlaceholder().css("cursor","ew-resize"):"y"===o.mode&&e.getPlaceholder().css("cursor","ns-resize"),e.getPlaceholder().css("cursor","move"),e.getPlaceholder().trigger("cursordragstart",o),e.triggerRedrawOverlay(),t.stopImmediatePropagation(),t.preventDefault())})})}function B(t,i,o){var n=ut(ot);if(n){j(n,i,o);var r,a=t.selectedThumb;r=a.classList.contains("x")?n.x+e.getPlotOffset().left:n.y+e.getPlotOffset().top,st.set(a,r),e.getPlaceholder().trigger("cursordrag",n),e.triggerRedrawOverlay(),t.stopImmediatePropagation(),t.preventDefault()}}function Y(t,i,o,n,r){var a=ut(ot);a&&(j(a,i,o),e.getPlaceholder().trigger("cursordrag",a),e.triggerRedrawOverlay(),t.stopImmediatePropagation(),t.preventDefault())}function X(t,i,o,n,r){if(!ht){var a=ut(ot);a&&0===t.buttons&&(a.selected=!1,e.triggerRedrawOverlay()),dt(ot).forEach(function(t){W(n,r,e,t)})}}function W(t,e,i,o){o.movable&&(R(t,e,i,o)?(o.highlighted||(o.highlighted=!0,i.triggerRedrawOverlay()),i.getPlaceholder().css("cursor","pointer")):L(t,e,i,o)?(o.highlighted||(o.highlighted=!0,i.triggerRedrawOverlay()),i.getPlaceholder().css("cursor","col-resize")):P(t,e,i,o)?(o.highlighted||(o.highlighted=!0,i.triggerRedrawOverlay()),i.getPlaceholder().css("cursor","row-resize")):o.highlighted&&(o.highlighted=!1,i.getPlaceholder().css("cursor","default"),i.triggerRedrawOverlay()))}function V(t,i,o,n,r){ht=!0;var a=ut(ot);if(at=C.xy,a)e.getPlaceholder().css("cursor","default"),a.x=i,a.y=o,a.position.relativeX=i/e.width(),a.position.relativeY=o/e.height(),e.triggerRedrawOverlay();else{var s,h;dt(ot).forEach(function(t){t.movable&&(R(n,r,e,t)?(s=t,h="xy"):P(n,r,e,t)?(s=t,h="y"):L(n,r,e,t)&&(s=t,h="x"),W(n,r,e,t))}),s&&(s.thumbmove=!1,s.selected=!0,s.dragmode=h,"x"===s.mode?e.getPlaceholder().css("cursor","ew-resize"):"y"===s.mode?e.getPlaceholder().css("cursor","ns-resize"):e.getPlaceholder().css("cursor","move"),e.getPlaceholder().css("cursor","move"),e.getPlaceholder().trigger("cursordragstart",s),e.triggerRedrawOverlay(),t.stopImmediatePropagation(),t.preventDefault())}a=ut(ot)}function F(t,i,o,n,r){ht=!1;var a=ut(ot);a&&(isFinite(i)&&isFinite(o)&&j(a,i,o),a.selected=!1,a.thumbmove=!1,e.getPlaceholder().css("cursor","default"),e.getPlaceholder().trigger("cursordragend",a),e.triggerRedrawOverlay(),t.stopImmediatePropagation(),t.preventDefault())}function j(t,i,o){var n=b(e,t),r=y(e,t);-1!==t.dragmode.indexOf("x")&&(t.x=i,t.position.x=n.c2p?n.c2p(i):void 0,t.position.relativeX=i/e.width(),t.mousePosition.relativeX=i/e.width()),-1!==t.dragmode.indexOf("y")&&(t.y=o,t.position.y=r.c2p?r.c2p(o):void 0,t.position.relativeY=o/e.height(),t.mousePosition.relativeY=o/e.height())}function G(t,i){if(et)return et(t,i);var o=e.offset();return[Math.max(0,Math.min(t-o.left,e.width())),Math.max(0,Math.min(i-o.top,e.height()))]}function q(e){e.thumbs.forEach(function(e){t.thumb.setHidden(e,!0)})}function U(e,i,o){it=t.thumb.createSVGLayer(i.getPlaceholder(),i.getEventHolder());var n,r,a,s,h=0,l={size:E.thumbRadius,svgRoot:it,abbreviation:e.thumbAbbreviation||e.name[0],classList:e.thumbClassList,offset:e.thumbOffset,fill:e.thumbColor};$(e)&&!e.thumbs[0]&&(h=1,r=e.x+o.left,a=-1!==e.showThumbs.indexOf("b")?i.height()+o.top+E.thumbRadius:o.top-E.thumbRadius,s=e.horizontalThumbConstrain?e.horizontalThumbConstrain:function(t,e,o,n,r,a){var s=i.offset().left;return[Math.max(s,Math.min(r,i.width()+s))-r+t,n]},l.shape=-1!==e.showThumbs.indexOf("b")?"bottom":"top",l.x=r,l.y=a,l.constraintFunction=s,
n=t.thumb.createThumb(l),e.thumbs[0]=n,st.set(n,r),T("thumbCreated",{current:n})),tt(e)&&!e.thumbs[h]&&(r=-1!==e.showThumbs.indexOf("l")?o.left-E.thumbRadius:o.left+i.width()+E.thumbRadius,a=e.y+o.top,s=e.verticalThumbConstrain?e.verticalThumbConstrain:function(t,e,o,n,r,a){var s=i.offset();return[o,Math.max(s.top,Math.min(a,i.height()+s.top))-a+e]},l.shape=-1!==e.showThumbs.indexOf("l")?"left":"right",l.x=r,l.y=a,l.constraintFunction=s,n=t.thumb.createThumb(l),e.thumbs[h]=n,st.set(n,a),T("thumbCreated",{current:n}))}function J(e,i,o){var n;if($(i)){n=i.thumbs[0];var r=i.x+o.left,a=st.get(n),s=Z(n);d(e,i.x)?(a<o.left?Q("thumbIntoRange",{target:n,edge:s?"topleft":"bottomleft",orientation:"horizontal",position:r},e.getEventHolder()):a>o.left+e.width()&&Q("thumbIntoRange",{target:n,edge:s?"topright":"bottomright",orientation:"horizontal",position:r},e.getEventHolder()),t.thumb.setHidden(n,!1),t.thumb.updateComputedXPosition(n,r)):(d(e,a-o.left)&&i.x<0?Q("thumbOutOfRange",{target:n,edge:s?"topleft":"bottomleft",orientation:"horizontal"},e.getEventHolder()):d(e,a-o.left)&&i.x>e.width()&&Q("thumbOutOfRange",{target:n,edge:s?"topright":"bottomright",orientation:"horizontal"},e.getEventHolder()),t.thumb.setHidden(n,!0)),st.set(n,r)}if(tt(i)){var h=$(i)?1:0;n=i.thumbs[h];var l=i.y+o.top,u=st.get(n),f=K(n);c(e,i.y)?(u<o.top?Q("thumbIntoRange",{target:n,edge:f?"topleft":"topright",orientation:"vertical",position:l},e.getEventHolder()):u>o.top+e.height()&&Q("thumbIntoRange",{target:n,edge:f?"bottomleft":"bottomright",orientation:"vertical",position:l},e.getEventHolder()),t.thumb.setHidden(n,!1),t.thumb.updateComputedYPosition(n,l)):(c(e,u-o.top)&&(i.y<0?Q("thumbOutOfRange",{target:n,edge:f?"topleft":"topright",orientation:"vertical"},e.getEventHolder()):i.y>e.height()&&Q("thumbOutOfRange",{target:n,edge:f?"bottomleft":"bottomright",orientation:"vertical"},e.getEventHolder())),t.thumb.setHidden(n,!0)),st.set(n,l)}}function Q(t,e,i){var o=new CustomEvent(t,{detail:e});i.dispatchEvent(o)}function Z(t){return t.classList.contains("top")}function K(t){return t.classList.contains("left")}function $(t){return-1!==t.showThumbs.indexOf("b")||-1!==t.showThumbs.indexOf("t")}function tt(t){return-1!==t.showThumbs.indexOf("l")||-1!==t.showThumbs.indexOf("r")}var et,it,ot=[],nt=[],rt=O.axis,at=C.xy,st=new Map,ht=!1;e.hooks.processOptions.push(function(t){t.getOptions().cursors.forEach(function(e){t.addCursor(e)})}),e.hooks.processOffset.push(function(t,e){lt(ot,t,e)}),e.getCursors=function(){return ot},e.addCursor=function(t){var i=s(t);n(e,i,i.position,rt),ot.push(i),e.triggerRedrawOverlay()},e.removeCursor=function(t){var i=ot.indexOf(t);-1!==i&&(t.thumbs.forEach(function(t){T("thumbWillBeRemoved",{current:t}),it.removeChild(t),st.delete(t)}),ot.splice(i,1)),e.triggerRedrawOverlay()},e.setCursor=function(t,o){var r=ot.indexOf(t);-1!==r&&(l(t,o),i(o,ot[r]),n(e,ot[r],ot[r].position),t._createThumbs?(e.setupGrid(),e.draw()):e.triggerRedrawOverlay())},e.getIntersections=function(t){var e=ot.indexOf(t);return-1!==e?ot[e].intersections:[]},e.formatCursorPosition=x,e.setPlotPositionConstrain=function(t){if("function"!=typeof t)throw new Error("plot position constrain should be a function");et=t};var lt=function(t,e,i){var o,n,r,a,s=["left","right","top","bottom"],h=[],l=0,u=2*E.thumbRadius;h=s.map(function(i,a){return o=t.some(function(t){return-1!==t.showThumbs.indexOf(i[0])}),r=a>1?e.getXAxes():e.getYAxes(),n=r.some(function(t){return t.options.position===i}),o&&!n?u:0});for(a in i)i[a]+=h[l++]},ut=function(t){var e;return t.forEach(function(t){t.selected&&(e||(e=t))}),e},dt=function(t){return t.filter(function(t){return t.show})},ct={start:function(t){var e=G(t.detail.touches[0].pageX,t.detail.touches[0].pageY),i=_slicedToArray(e,2);V(t,i[0],i[1],t.detail.touches[0].pageX,t.detail.touches[0].pageY)},drag:function(t){var e=G(t.detail.touches[0].pageX,t.detail.touches[0].pageY),i=_slicedToArray(e,2);Y(t,i[0],i[1],t.detail.touches[0].pageX,t.detail.touches[0].pageY)},end:function(t){F(t)}},ft={start:function(t){var e=G(t.detail.touches[0].pageX,t.detail.touches[0].pageY),i=_slicedToArray(e,2);V(t,i[0],i[1],t.detail.touches[0].pageX,t.detail.touches[0].pageY)},drag:function(t){var e=G(t.detail.touches[0].pageX,t.detail.touches[0].pageY),i=_slicedToArray(e,2);Y(t,i[0],i[1],t.detail.touches[0].pageX,t.detail.touches[0].pageY)},end:function(t){F(t)}},pt={start:function(t){D(t)},drag:function(t){var e=G(t.pageX,t.pageY),i=_slicedToArray(e,2);B(t,i[0],i[1])},end:function(t){F(t)}},gt={start:function(e){var i=t.plot.browser.getPageXY(e),o=G(i.X,i.Y),n=_slicedToArray(o,2);V(e,n[0],n[1],i.X,i.Y)},drag:function(e){var i=t.plot.browser.getPageXY(e),o=G(i.X,i.Y),n=_slicedToArray(o,2);Y(e,n[0],n[1],i.X,i.Y)},mouseover:function(e){var i=t.plot.browser.getPageXY(e),o=G(i.X,i.Y),n=_slicedToArray(o,2);X(e,n[0],n[1],i.X,i.Y)},end:function(e){var i=t.plot.browser.getPageXY(e),o=G(i.X,i.Y),n=_slicedToArray(o,2);F(e,n[0],n[1],i.X,i.Y)}};e.hooks.bindEvents.push(function(t,e){e[0].addEventListener("panstart",ct.start,!1),e[0].addEventListener("pandrag",ct.drag,!1),e[0].addEventListener("panend",ct.end,!1),e[0].addEventListener("pinchstart",ft.start,!1),e[0].addEventListener("pinchdrag",ft.drag,!1),e[0].addEventListener("pinchend",ft.end,!1),t.getPlaceholder().bind("plotpan",M),t.getPlaceholder().bind("plotzoom",M),e[0].addEventListener("thumbmovestart",pt.start,!1),e[0].addEventListener("thumbmove",pt.drag,!1),e[0].addEventListener("thumbmoveend",pt.end,!1),t.addEventHandler("dragstart",gt.start,e,10),t.addEventHandler("drag",gt.drag,e,10),t.addEventHandler("dragend",gt.end,e,10),e.bind("mousemove",gt.mouseover)}),e.hooks.processRawData.push(function(t,e,i,o){e.historyBuffer&&(z(),at=C.x)}),e.hooks.drawOverlay.push(function(t,e){var i=function(t){return void 0!==t.relativeX&&void 0!==t.relativeY};nt=[],ot.forEach(function(s){var h;if(o(t,s),n(t,s,s.position),i(s.mousePosition)||(s.mousePosition.relativeX=s.x/t.width(),s.mousePosition.relativeY=s.y/t.height()),h=I(t,s),r(t,s,h),s.intersections=h,h.target=s,nt.push(h),s.show){var l=t.getPlotOffset();e.save(),e.translate(l.left,l.top),a(t,e,s),_(t,e,s),p(t,e,s),m(t,e,s),w(t,e,s),"none"!==s.symbol&&k(t,e,s),e.restore(),"none"!==s.showThumbs?0===s.thumbs.length||s._createThumbs?(U(s,t,l),s._createThumbs=!1):s.thumbmove||(J(t,s,l),S(s,!0)):(q(s),S(s,!1))}else q(s),S(s,!1)}),nt.length>0&&t.getPlaceholder().trigger("cursorupdates",[nt])}),e.hooks.resize.push(function(e,i,o){ot.forEach(function(n){var r=e.getPlotOffset(),a=0,s=n.thumbs[0];if($(n)&&s&&(a=1,-1!==n.showThumbs.indexOf("b"))){var h=o-r.bottom+E.thumbRadius;t.thumb.updateComputedYPosition(s,h)}var l=n.thumbs[a];if(tt(n)&&l&&-1!==n.showThumbs.indexOf("r")){var u=i-r.right+E.thumbRadius;t.thumb.updateComputedXPosition(l,u)}})}),e.hooks.shutdown.push(function(e,i){i[0].removeEventListener("panstart",ct.start),i[0].removeEventListener("pandrag",ct.drag),i[0].removeEventListener("panend",ct.end),i[0].removeEventListener("pinchstart",ft.start),i[0].removeEventListener("pinchdrag",ft.drag),i[0].removeEventListener("pinchend",ft.end),i[0].removeEventListener("thumbmovestart",pt.start),i[0].removeEventListener("thumbmove",pt.drag),i[0].removeEventListener("thumbmoveend",pt.end),i.unbind("dragstart",gt.start),i.unbind("drag",gt.drag),i.unbind("dragend",gt.end),i.unbind("mousemove",gt.mouseover),i.unbind("cursorupdates");var o=e.getPlaceholder();o.unbind("plotpan",M),o.unbind("plotzoom",M),o.css("cursor","default"),o.find(".flot-thumbs")[0]&&t.thumb.shutdown(o.find(".flot-thumbs")[0].firstChild),ot=[],st.clear(),nt=[]})}function i(t,e){return Object.keys(t).forEach(function(i){e[i]=t[i]}),e}function o(t,e){var i=b(t,e),o=y(t,e),n=e.position;void 0!==n.x&&void 0!==n.y||!i.c2p||!o.c2p||0===i.min&&1===i.max&&0===o.min&&1===o.max||(n.x=i.c2p(n.relativeX*t.width()),n.y=o.c2p(n.relativeY*t.height())),(void 0===n.relativeX||void 0===n.relativeY)&&i.p2c&&o.p2c&&void 0!==n.x&&void 0!==n.y&&(n.relativeX=i.p2c(n.x)/t.width(),n.relativeY=o.p2c(n.y)/t.height())}function n(t,e,i){var o,n,r=b(t,e),a=y(t,e);o=void 0!==i.x&&r.p2c?r.p2c(i.x):i.relativeX*t.width(),n=void 0!==i.y&&a.p2c?a.p2c(i.y):i.relativeY*t.height(),e.x=o,e.y=n}function r(t,e,i){if(e.snapToPlot>=-1){var o=i.points[0];if(o){var r=t.getData()[o.seriesIndex],a=r.xaxis.p2c(o.x)/t.width(),s=r.yaxis.p2c(o.y)/t.height();n(t,e,{x:o.x,y:o.y}),e.position.x=o.x,e.position.y=o.y,e.position.relativeX=a,e.position.relativeY=s,i.x=o.x,i.y=o.y}}}function a(t,e,i){var o=t.width(),n=t.height(),r=i.y,a=i.x,s=0,l=0,u=h(i),d=Number(i.fontSize.substring(0,i.fontSize.length-2));if(e.font=i.fontStyle+" "+i.fontWeight+" "+i.fontSize+" "+i.fontFamily,i.showLabel&&(s=Math.max(s,e.measureText(i.name).width)),i.showValues){var c=x(t,i),f=c.xTextValue+", "+c.yTextValue;s=Math.max(s,e.measureText(f).width)}"right"===i.halign&&a+s>.95*o?i.halign="left":"left"===i.halign&&a-s<.05*o&&(i.halign="right"),l=u*(d+E.labelPadding),"below"===i.valign&&r+l>.95*n?i.valign="above":"above"===i.valign&&r-l<.05*n&&(i.valign="below")}function s(t,e,i,o){var n="left",r=Number(e.fontSize.substring(0,e.fontSize.length-2)),a=e.y,s=e.x;return"left"===e.halign?(s-=E.labelPadding,n="right"):s+=E.labelPadding,"above"===e.valign?a-=E.labelPadding*(o-i)+r*(o-1-i):a+=E.labelPadding*(i+1)+r*(i+1),{x:s,y:a,textAlign:n}}function h(t){return(t.showLabel?1:0)+(t.showValues?1:0)}function l(t){return 0}function u(t){return t.showLabel?1:0}function d(t,e){return e>=0&&Math.round(e)<=t.width()}function c(t,e){return e>=0&&Math.round(e)<=t.height()}function f(t,e){return d(t,e.x)&&c(t,e.y)}function p(t,e,i){if(i.showLabel&&f(t,i)){e.beginPath();var o=s(t,i,l(i),h(i));e.fillStyle=i.color,e.textAlign=o.textAlign,e.font=i.fontStyle+" "+i.fontWeight+" "+i.fontSize+" "+i.fontFamily,e.fillText(i.name,o.x,o.y),e.textAlign="left",e.stroke()}}function g(t,e,i,o,n,r,a,s,h){var l,u=Number(s.substring(0,s.length-2));switch(n){case"left":l=t.measureText(e).width,i=i-l-E.iRectSize;break;case"bottom-left":l=t.measureText(e).width,i=i-l-E.iRectSize,o+=u;break;case"top-left":l=t.measureText(e).width,i=i-l-E.iRectSize,o-=E.iRectSize;break;case"top-right":i+=E.iRectSize,o-=E.iRectSize;break;case"right":i+=E.iRectSize;break;case"bottom-right":default:i+=E.iRectSize,o+=u}t.textBaseline="middle",t.font=r+" "+a+" "+s+" "+h,t.fillText(e,i,o)}function m(t,e,i){if(i.showIntersections&&T(i)){if(e.beginPath(),void 0===i.intersections)return;i.intersections.points.forEach(function(o,n){if("object"!==_typeof(i.showIntersections)||-1!==i.showIntersections.indexOf(n)){var r=t.p2c(o);e.fillStyle=i.intersectionColor,e.fillRect(Math.floor(r.left)-E.iRectSize/2,Math.floor(r.top)-E.iRectSize/2,E.iRectSize,E.iRectSize);var a;a="function"==typeof i.formatIntersectionData?i.formatIntersectionData(o):o.y.toFixed(2),g(e,a,r.left,r.top,i.intersectionLabelPosition,i.fontStyle,i.fontWeight,i.fontSize,i.fontFamily)}}),e.stroke()}}function v(t,e,i){var o="x"===e.direction?i+1:i-1,n=e.c2p(i),r=e.c2p(o);return t.computeValuePrecision(n,r,e.direction,1)}function b(t,e){var i=t.getData(),o=t.getXAxes(),n=e.defaultxaxis-1;if(e.snapToPlot>=-1){if(e.intersections&&e.intersections.points[0]){var r=i[e.intersections.points[0].seriesIndex];return r?r.xaxis:o[n]}return o[n]}return o[n]}function y(t,e){var i=t.getData(),o=t.getYAxes(),n=e.defaultyaxis-1;if(e.snapToPlot>=-1){if(e.intersections&&e.intersections.points[0]){var r=i[e.intersections.points[0].seriesIndex];return r?r.yaxis:o[n]}return o[n]}return o[n]}function x(t,e){var i=b(t,e),o=y(t,e),n=v(t,i,e.x),r=i.tickFormatter(i.c2p(e.x),i,n,t),a=v(t,o,e.y),s=o.tickFormatter(o.c2p(e.y),o,a,t);return r=r.replace("<br>"," "),r=r.replace("&nbsp;"," "),s=s.replace("<br>"," "),s=s.replace("&nbsp;"," "),{xTextValue:r,yTextValue:s}}function w(t,e,i){if(i.showValues&&f(t,i)){var o=x(t,i),n=o.xTextValue+", "+o.yTextValue,r=s(t,i,u(i),h(i));e.fillStyle=i.color,e.textAlign=r.textAlign,e.font=i.fontStyle+" "+i.fontWeight+" "+i.fontSize+" "+i.fontFamily,e.fillText(n,r.x,r.y)}}function _(t,e,i){if(0!==i.lineWidth){var o=i.lineWidth%2?.5:0;if(e.strokeStyle=i.color,e.lineWidth=i.lineWidth,e.lineJoin="round",e.beginPath(),e.setLineDash(i.dashes),-1!==i.mode.indexOf("x")&&d(t,i.x)){var n=Math.floor(i.x)+o;e.moveTo(n,Math.min(t.height(),Math.max(0,i.y-i.symbolSize/2))),e.lineTo(n,0),e.moveTo(n,Math.min(t.height(),Math.max(0,i.y+i.symbolSize/2))),e.lineTo(n,t.height())}if(-1!==i.mode.indexOf("y")&&c(t,i.y)){var r=Math.floor(i.y)+o;e.moveTo(Math.min(t.width(),Math.max(0,i.x-i.symbolSize/2)),r),e.lineTo(0,r),e.moveTo(Math.min(t.width(),Math.max(0,i.x+i.symbolSize/2)),r),e.lineTo(t.width(),r)}e.stroke(),e.setLineDash([])}}function k(t,e,i){if(f(t,i)){var o=i.lineWidth%2?.5:0;e.beginPath(),i.highlighted?e.strokeStyle="orange":e.strokeStyle=i.color,i.symbol&&t.drawSymbol&&t.drawSymbol[i.symbol]?(e.fillStyle=i.color,t.drawSymbol[i.symbol](e,Math.floor(i.x)+o,Math.floor(i.y)+o,i.symbolSize/2,0)):e.fillRect(Math.floor(i.x)+o-i.symbolSize/2,Math.floor(i.y)+o-i.symbolSize/2,i.symbolSize,i.symbolSize),e.stroke()}}function T(t){return-1!==t.mode.indexOf("x")}function S(t){return-1!==t.mode.indexOf("y")}function R(t,e,i,o){var n=i.offset(),r=Math.max(0,Math.min(t-n.left,i.width())),a=Math.max(0,Math.min(e-n.top,i.height())),s=o.symbolSize+E.mouseGrabMargin;return r>o.x-s&&r<o.x+s&&a>o.y-s&&a<o.y+s&&"none"!==o.symbol}function L(t,e,i,o){var n=i.offset(),r=Math.max(0,Math.min(t-n.left,i.width())),a=Math.max(0,Math.min(e-n.top,i.height()));return T(o)&&r>o.x-E.mouseGrabMargin&&r<o.x+E.mouseGrabMargin&&a>0&&a<i.height()}function P(t,e,i,o){var n=i.offset(),r=Math.max(0,Math.min(t-n.left,i.width())),a=Math.max(0,Math.min(e-n.top,i.height()));return S(o)&&a>o.y-E.mouseGrabMargin&&a<o.y+E.mouseGrabMargin&&r>0&&r<i.width()}var z={cursors:[]},E={iRectSize:8,mouseGrabMargin:12,textHeight:10,labelPadding:10,thumbRadius:17},O=Object.freeze({axis:0,relative:1}),C=Object.freeze({xy:0,x:1}),A=Object.freeze({t:"top",b:"bottom",l:"left",r:"right"});t.plot.plugins.push({init:e,options:z,name:"cursors",version:"0.2"})}(jQuery),function(t){function e(e){function i(){return{position:.5,absolutePosition:void 0,show:!0,orientation:"vertical",location:"far",axisIndex:0,radius:o,handleLabel:M.length.toString(),handleClassList:["draggable"],fill:void 0,horizontalHandleConstrain:void 0,verticalHandleConstrain:void 0,positionInPixel:void 0,selected:!1,thumbmove:!1,thumb:void 0}}function a(t){"vertical"!==t.orientation&&"horizontal"!==t.orientation&&(console.log("orientation is invalid. it will be coerced to vertical"),t.orientation="vertical");var i="vertical"===t.orientation?e.getYAxes():e.getXAxes();(t.axisIndex<0||t.axisIndex>i.length-1)&&(console.log("axisIndex is invalid. it will be coerced to 0"),t.axisIndex=0)}function s(t,e,i){var o=t.filter(function(t){return"far"===t.location}),r={},a=e.getXAxes(),s=e.getYAxes();o.forEach(function(t){S(t)?r[n[a[t.axisIndex].options.position]]=2*t.radius:r[n[s[t.axisIndex].options.position]]=2*t.radius}),Object.keys(r).forEach(function(t){i[t]+=Math.max(0,r[t]-i[t])})}function h(t){var e=t.filter(function(t){return t.selected});return e.length>0?e[0]:void 0}function l(t){return t.filter(function(t){return t.show})}function u(t){return 0===t.button||t.touches}function d(t,i){var o=L(e,i);Number.isNaN(t.x)&&(t.x=0),Number.isNaN(t.y)&&(t.y=0);var n=o.options,a=t[o.direction],s=B.previousDelta[o.direction]-t[o.direction];if(0!==a){var h=r.saturate(o.c2p(o.p2c(o.min)-s)-o.c2p(o.p2c(o.min))),l=r.saturate(o.c2p(o.p2c(o.max)-s)-o.c2p(o.p2c(o.max)));isFinite(h)||(h=0),isFinite(l)||(l=0),n.offset={below:r.saturate(h+(n.offset.below||0)),above:r.saturate(l+(n.offset.above||0))}}B.previousDelta=t,e.setupGrid(!0),e.draw(),e.getPlaceholder().trigger("axisHandlePan",[t,o,B,i])}function c(t,i){if(A)return A(t,i);var o=e.offset();return[Math.max(0,Math.min(t-o.left,e.width())),Math.max(0,Math.min(i-o.top,e.height()))]}function f(t){function i(t){var e=t,i=t.getAttribute("class");return i.includes("interactionLayer")&&(e=t.parentNode,i=e.getAttribute("class")),i.includes("thumb")?e:null}if(u(t.detail)){var o=c(t.pageX,t.pageY),n=_slicedToArray(o,2);B.startX=n[0],B.startY=n[1];if(!h(M)){var r=l(M).find(function(e){return e.thumb===i(t.detail.target)});r.selected=!0,r.thumbmove=!0,t.stopImmediatePropagation(),t.preventDefault(),e.getPlaceholder().trigger("axisHandlePanStart",[r])}}}function p(t){if(!O){var i=h(M);if(i){var o=c(t.pageX,t.pageY),n=_slicedToArray(o,2),r=n[0],a=n[1];O=window.requestAnimationFrame(function(){d({x:B.startX-r,y:B.startY-a},i),O=void 0});var s=i.positionInPixel+(S(i)?e.getPlotOffset().left:e.getPlotOffset().top);N.set(t.selectedThumb,s),t.stopImmediatePropagation(),t.preventDefault()}}}function g(t){O&&(window.cancelAnimationFrame(O),O=void 0);var i=h(M);i&&(B.previousDelta={x:0,y:0},i.selected=!1,i.thumbmove=!1,y(i,e.getPlotOffset()),e.triggerRedrawOverlay(),t.stopImmediatePropagation(),t.preventDefault(),e.getPlaceholder().trigger("axisHandlePanEnd",[i]))}function m(e,i,o){C=t.thumb.createSVGLayer(i.getPlaceholder(),i.getEventHolder());var n,r,a,s,h={size:e.radius,svgRoot:C,abbreviation:e.handleLabel,classList:e.handleClassList.slice(),fill:e.fill};S(e)?(r=e.positionInPixel+o.left,a="near"===e.location?i.height()+o.top+e.radius:o.top-e.radius,s=e.horizontalHandleConstrain?e.horizontalHandleConstrain:function(t,e,o,n){var r=i.offset().left;return[Math.max(r,Math.min(t,i.width()+r)),n]},h.shape="near"===e.location?"bottom":"top",h.x=r,h.y=a,h.constraintFunction=s,n=t.thumb.createThumb(h),N.set(n,r)):(r="near"===e.location?o.left-e.radius:o.left+i.width()+e.radius,a=e.positionInPixel+o.top,s=e.verticalHandleConstrain?e.verticalHandleConstrain:function(t,e,o,n){var r=i.offset();return[o,Math.max(r.top,Math.min(e,i.height()+r.top))]},h.shape="near"===e.location?"left":"right",h.x=r,h.y=a,h.constraintFunction=s,n=t.thumb.createThumb(h),N.set(n,a)),e.thumb=n,T("thumbCreated",{current:n})}function v(t){var i=Math.round(t);return i>=0&&i<=e.width()}function b(t){var i=Math.round(t);return i>=0&&i<=e.height()}function y(i,o){var n;if(S(i)){n=i.thumb;var r=i.positionInPixel+o.left,a=N.get(n),s=w(n);v(i.positionInPixel)?(a<o.left?k("thumbIntoRange",{target:n,edge:s?"topleft":"bottomleft",orientation:"horizontal",position:r},e.getEventHolder()):a>o.left+e.width()&&k("thumbIntoRange",{target:n,edge:s?"topright":"bottomright",orientation:"horizontal",position:r},e.getEventHolder()),t.thumb.setHidden(n,!1),t.thumb.updateComputedXPosition(n,r)):(v(a-o.left)&&r<o.left?k("thumbOutOfRange",{target:n,edge:s?"topleft":"bottomleft",orientation:"horizontal"},e.getEventHolder()):v(a-o.left)&&r>e.width()+o.left&&k("thumbOutOfRange",{target:n,edge:s?"topright":"bottomright",orientation:"horizontal"},e.getEventHolder()),t.thumb.setHidden(n,!0)),N.set(n,r)}else{n=i.thumb;var h=i.positionInPixel+o.top,l=N.get(n),u=_(n);b(i.positionInPixel)?(l<o.top?k("thumbIntoRange",{target:n,edge:u?"topleft":"topright",orientation:"vertical",position:h},e.getEventHolder()):l>o.top+e.height()&&k("thumbIntoRange",{target:n,edge:u?"bottomleft":"bottomright",orientation:"vertical",position:h},e.getEventHolder()),t.thumb.setHidden(n,!1),t.thumb.updateComputedYPosition(n,h)):(b(l-o.top)&&(h<o.top?k("thumbOutOfRange",{target:n,edge:u?"topleft":"topright",orientation:"vertical"},e.getEventHolder()):h>e.height()+o.top&&k("thumbOutOfRange",{target:n,edge:u?"bottomleft":"bottomright",orientation:"vertical"},e.getEventHolder())),t.thumb.setHidden(n,!0)),N.set(n,h)}}function x(e,i,o,n){if(e.thumb){var r=i.getPlotOffset();if(S(e)){var a="near"===e.location?n-r.bottom+e.radius:r.top-e.radius;t.thumb.updateComputedYPosition(e.thumb,a)}else{var s="near"===e.location?r.left-e.radius:o-r.right+e.radius;t.thumb.updateComputedXPosition(e.thumb,s)}}}function w(t){return"top"===t.shape}function _(t){return"left"===t.shape}function k(t,e,i){var o=new CustomEvent(t,{detail:e});i.dispatchEvent(o)}function T(t,i){var o=new CustomEvent(t,{detail:i});e.getPlaceholder()[0].dispatchEvent(o)}function S(t){return"horizontal"===t.orientation}function R(t,e){var i=L(t,e),o=S(e)?t.width():t.height();if(isFinite(e.absolutePosition)&&i.p2c)return e.positionInPixel=i.p2c(e.absolutePosition),void(e.position=e.positionInPixel/o);e.positionInPixel=void 0!==e.position?e.position*o:void 0,!isFinite(e.absolutePosition)&&isFinite(e.positionInPixel)&&i.c2p&&(e.absolutePosition=i.c2p(e.positionInPixel))}function L(t,e){return S(e)?t.getXAxes()[e.axisIndex]:t.getYAxes()[e.axisIndex]}function P(t,e){return t.filter(function(t){return!e.includes(t)})}function z(t,i){var o=Object.keys(t),n=P(o,I),r=!1,a=isFinite(t.absolutePosition),s=isFinite(t.position)||t.orientation;if(!a&&s&&(i.absolutePosition=void 0),n.forEach(function(e){!r&&H.includes(e)&&i[e]!==t[e]&&(r=!0),"show"===e&&i[e]!==t[e]&&(i.triggerThumbVisibilityChanged=!0),i[e]=t[e]}),i.thumb)if(i.thumb.classList.toggle("draggable",i.handleClassList.includes("draggable")),r)T("thumbWillBeRemoved",{current:i.thumb}),N.delete(i.thumb),C.removeChild(i.thumb),i.thumb=null,e.setupGrid(),e.draw();else{var h=i.thumb.getElementsByClassName("thumbLabel")[0];h.textContent=i.handleLabel;var l=i.thumb.getElementsByClassName("thumbIcon")[0];l.style.fill=i.fill}return i}function E(t){t.triggerThumbVisibilityChanged&&T("thumbVisibilityChanged",{current:t.thumb,visible:t.show})}var O,C,A,M=[],I=["positionInPixel","selected","thumbmove","thumb"],H=["orientation","location","radius"],N=new Map,D={start:function(t){f(t)},drag:function(t){p(t)},end:function(t){g(t)}},B={startX:void 0,startY:void 0,previousDelta:{x:0,y:0}};e.getAxisHandles=function(){return M},e.addAxisHandle=function(t){var o=z(t,i());a(o),R(e,o),M.push(o),e.triggerRedrawOverlay()},e.removeAxisHandle=function(t){var i=M.indexOf(t);-1!==i&&(t.thumb&&(T("thumbWillBeRemoved",{current:t.thumb}),C.removeChild(t.thumb),N.delete(t.thumb),t.thumb=null),M.splice(i,1)),e.triggerRedrawOverlay()},e.setAxisHandle=function(t,i){var o=M.indexOf(t);-1!==o&&(z(i,M[o]),a(M[o]),R(e,M[o]),e.triggerRedrawOverlay())},e.setAxisHandlePlotPositionConstrain=function(t){if("function"!=typeof t)throw new Error("constrain should be a function");A=t},e.hooks.processOptions.push(function(t){t.getOptions().axisHandles.forEach(function(e){t.addAxisHandle(e)})}),e.hooks.processOffset.push(function(t,e){s(M,t,e)}),e.hooks.drawOverlay.push(function(e,i){var o=e.getPlotOffset();M.forEach(function(i){R(e,i),i.show?i.thumb?i.thumbmove||(y(i,o),E(i)):m(i,e,o):i.thumb&&(t.thumb.setHidden(i.thumb,!0),E(i))}),e.getPlaceholder().trigger("axisHandleUpdates",[M])}),e.hooks.resize.push(function(t,e,i){M.forEach(function(o){x(o,t,e,i)})}),e.hooks.bindEvents.push(function(t,e){e[0].addEventListener("thumbmovestart",D.start,!1),e[0].addEventListener("thumbmove",D.drag,!1),e[0].addEventListener("thumbmoveend",D.end,!1)}),e.hooks.shutdown.push(function(e,i){i[0].removeEventListener("thumbmovestart",D.start),i[0].removeEventListener("thumbmove",D.drag),i[0].removeEventListener("thumbmoveend",D.end),C=void 0,M=[],N.clear();var o=e.getPlaceholder();o.find(".flot-thumbs")[0]&&t.thumb.shutdown(o.find(".flot-thumbs")[0].firstChild)})}var i={axisHandles:[]},o=17,n=Object.freeze({left:"right",right:"left",bottom:"top",top:"bottom"}),r=t.plot.saturated;t.plot.plugins.push({init:e,options:i,name:"axis-handle",version:"2.0.3"})}(jQuery),function(t){function e(t){var e;t.hooks.processOptions.push(function(t){t.getOptions().parkingLot&&(e=new n(t,{offset:t.getOptions().parkingLot.offset,show:t.getOptions().parkingLot.show}))}),t.hooks.processOffset.push(function(t,i){if(e&&e._show){var o=e.reserveSpace();Object.keys(i).forEach(function(t){i[t]+=o[t]})}}),t.hooks.drawOverlay.push(function(t,i){e&&e.render(t)}),t.hooks.bindEvents.push(function(t,i){e&&e.bindEvents(t)}),t.hooks.shutdown.push(function(t,i){e&&e.dispose(t)}),t.getParkingLot=function(){return e}}var i=function(t){function e(){var t,i;_classCallCheck(this,e);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return i=_possibleConstructorReturn(this,(t=_getPrototypeOf(e)).call.apply(t,[this].concat(n))),i.setChangedListeners=[],i}return _inherits(e,t),_createClass(e,[{key:"add",value:function(t){var i=this.size,o=_get(_getPrototypeOf(e.prototype),"add",this).call(this,t);return this.size!==i&&this.onSetChanged("add"),o}},{key:"delete",value:function(t){var i=_get(_getPrototypeOf(e.prototype),"delete",this).call(this,t);return i&&this.onSetChanged("remove"),i}},{key:"clear",value:function(){var t=this.size;_get(_getPrototypeOf(e.prototype),"clear",this).call(this),t>0&&this.onSetChanged("reset")}},{key:"onSetChanged",value:function(t){if(void 0!==this.setChangedListeners){this.setChangedListeners.slice().forEach(function(e){e(t)})}}},{key:"addSetChangedListener",value:function(t){if("function"!=typeof t)throw new Error("listener is not a callable object");this.setChangedListeners.push(t)}},{key:"removeSetChangedListener",value:function(t){var e=this.setChangedListeners.findIndex(t);-1!==e&&this.setChangedListeners.splice(e,1)}}],[{key:Symbol.species,get:function(){return Set}}]),e}(_wrapNativeSuper(Set)),o=Object.freeze({topLeft:"topleft",topRight:"topright",bottomLeft:"bottomleft",bottomRight:"bottomright"}),n=function(){function e(t,i){_classCallCheck(this,e),this._offset=i.offset||35,this._thumbRadius=i.thumbRadius||17,this._show=!1!==i.show,this._initialize(t)}return _createClass(e,[{key:"_initialize",value:function(t){this.thumbs=new Set;var e=function(e){"reset"!==e&&t.triggerRedrawOverlay()};this.topLeftHorizontalDocker=new i,this.topLeftHorizontalDocker.addSetChangedListener(e),this.topLeftVerticalDocker=new i,this.topLeftVerticalDocker.addSetChangedListener(e),this.topRightHorizontalDocker=new i,this.topRightHorizontalDocker.addSetChangedListener(e),this.topRightVerticalDocker=new i,this.topRightVerticalDocker.addSetChangedListener(e),this.bottomRightHorizontalDocker=new i,this.bottomRightHorizontalDocker.addSetChangedListener(e),this.bottomRightVerticalDocker=new i,this.bottomRightVerticalDocker.addSetChangedListener(e),this.bottomLeftHorizontalDocker=new i,this.bottomLeftHorizontalDocker.addSetChangedListener(e),this.bottomLeftVerticalDocker=new i,this.bottomLeftVerticalDocker.addSetChangedListener(e),this._attachConstrains(t),this._onThumbMoveStart=this._onThumbMoveStart.bind(this),this._onThumbCreated=this._onThumbCreated.bind(this,t),this._onThumbWillBeRemoved=this._onThumbWillBeRemoved.bind(this,t),this._onThumbVisibilityChanged=this._onThumbVisibilityChanged.bind(this,t),this._onThumbIntoRange=this._onThumbIntoRange.bind(this,t),this._onThumbOutOfRange=this._onThumbOutOfRange.bind(this)}},{key:"dispose",value:function(t){this.topLeftHorizontalDocker.clear(),this.bottomLeftHorizontalDocker.clear(),this.topRightHorizontalDocker.clear(),this.bottomRightHorizontalDocker.clear(),this.topLeftVerticalDocker.clear(),this.bottomLeftVerticalDocker.clear(),this.topRightVerticalDocker.clear(),this.bottomRightVerticalDocker.clear(),this._unbindEvents(t)}},{key:"reserveSpace",value:function(){var t=this;return["left","right","bottom","top"].reduce(function(e,i){return e[i]=t._offset,e},{})}},{key:"_createThumbConstrain",value:function(e){var i=this;return{horizontal:function(o,n,r,a,s,h){var l=i.thumbMoveState.selectedElement,u=e.getPlotOffset(),d=!1;if(i.thumbMoveState.inParkingLot){var c=e.offset();if(s>=c.left&&s<=c.left+e.width()){t.thumb.setHidden(l,!1);var f={target:l,edge:i.thumbMoveState.parkingLotLocation,orientation:"horizontal",position:s-c.left+u.left};i.thumbMoveState.axisHandle&&(f.axisHandle=i.thumbMoveState.axisHandle),i._dispatchThumbEvent("thumbIntoRange",f,e.getEventHolder()),d=!0,i.thumbMoveState.inParkingLot=!1}}else{var p=i._willHorizontalThumbBeMovedOffGraph(l,s,e),g=_slicedToArray(p,2);i.thumbMoveState.inParkingLot=g[0],i.thumbMoveState.parkingLotLocation=g[1]}return[o,a,d]},vertical:function(o,n,r,a,s,h){var l=i.thumbMoveState.selectedElement,u=e.getPlotOffset(),d=!1;if(i.thumbMoveState.inParkingLot){var c=e.offset();if(h>=c.top&&h<=c.top+e.height()){t.thumb.setHidden(l,!1);var f={target:l,edge:i.thumbMoveState.parkingLotLocation,orientation:"vertical",position:h-c.top+u.top};i.thumbMoveState.axisHandle&&(f.axisHandle=i.thumbMoveState.axisHandle),i._dispatchThumbEvent("thumbIntoRange",f,e.getEventHolder()),d=!0,i.thumbMoveState.inParkingLot=!1}}else{var p=i._willVerticalThumbBeMovedOffGraph(l,h,e),g=_slicedToArray(p,2);i.thumbMoveState.inParkingLot=g[0],i.thumbMoveState.parkingLotLocation=g[1]}return[r,n,d]}}}},{key:"_createAxisHandleThumbConstrain",value:function(t,e){var i=this;return{horizontal:function(){return i.thumbMoveState.axisHandle=e,t.horizontal.apply(t,arguments)},vertical:function(){return i.thumbMoveState.axisHandle=e,t.vertical.apply(t,arguments)}}}},{key:"_willVerticalThumbBeMovedOffGraph",value:function(e,i,n){var r,a=n.offset(),s=!1;return i<a.top?(r="left"===e.shape?o.topLeft:o.topRight,s=!0):i>a.top+n.height()&&(r="left"===e.shape?o.bottomLeft:o.bottomRight,s=!0),s&&(t.thumb.setHidden(e,!0),this._dispatchThumbEvent("thumbOutOfRange",{target:e,edge:r,orientation:"vertical"},n.getEventHolder())),[s,r]}},{key:"_willHorizontalThumbBeMovedOffGraph",value:function(e,i,n){var r,a=n.offset(),s=!1;return i<a.left?(r="top"===e.shape?o.topLeft:o.bottomLeft,s=!0):i>a.left+n.width()&&(r="top"===e.shape?o.topRight:o.bottomRight,s=!0),s&&(t.thumb.setHidden(e,!0),this._dispatchThumbEvent("thumbOutOfRange",{target:e,edge:r,orientation:"horizontal"},n.getEventHolder())),[s,r]}},{key:"_dispatchThumbEvent",value:function(t,e,i){var o=new CustomEvent(t,{detail:e});i.dispatchEvent(o)}},{key:"_createPlotValueConstrain",value:function(t){return function(e,i){var o=t.offset();return[Math.max(-1,Math.min(e-o.left,t.width()+1)),Math.max(-1,Math.min(i-o.top,t.height()+1))]}}},{key:"render",value:function(t){this._lazyInitializeForRender(t),this._renderDockers(t)}},{key:"_lazyInitializeForRender",value:function(e){var i=this;if(!this.svgRoot){this.svgRoot=t.thumb.createSVGLayer(e.getPlaceholder(),e.getEventHolder());var n=(new DOMParser).parseFromString('<defs xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <symbol id="left-arrow" viewBox="0 0 40 50">\n                            <rect x="0" y="0" width="40" height="50"/>\n                            <polyline points="20,10 10,25 20,40" fill="none"/>\n                            <polyline points="10,25 30,25" fill="none"/>\n                        </symbol>\n                        <symbol id="up-arrow" viewBox="0 0 50 40">\n                            <rect x="0" y="0" width="50" height="40" />\n                            <polyline points="10,20 25,10 40,20" fill="none"/>\n                            <polyline points="25,10 25,30" fill="none"/>\n                        </symbol>\n                        <symbol id="right-arrow" viewBox="0 0 40 50">\n                            <use xlink:href="#left-arrow" x="0" y="0" width="40" height="50" transform="rotate(180,20,25)"/>\n                        </symbol>\n                        <symbol id="down-arrow" viewBox="0 0 50 40">\n                            <use xlink:href="#up-arrow" x="0" y="0" width="50" height="40" transform="rotate(180,25,20)"/>\n                        </symbol>\n                     </defs>',"image/svg+xml"),r=document.importNode(n.documentElement,!0);this.svgRoot.appendChild(r);var a=function(t,e){t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),t.setAttributeNS("http://www.w3.org/1999/xlink","href",e)},s={topLeft:{horizontal:"#left-arrow",vertical:"#up-arrow"},topRight:{horizontal:"#right-arrow",vertical:"#up-arrow"},bottomLeft:{horizontal:"#left-arrow",vertical:"#down-arrow"},bottomRight:{horizontal:"#right-arrow",vertical:"#down-arrow"}};this._dockerIndicators={},this._dockerBorders={},Object.keys(o).forEach(function(t){i._dockerIndicators[t]={},i._dockerBorders[t]={},["horizontal","vertical"].forEach(function(e){
var o=document.createElementNS("http://www.w3.org/2000/svg","use");a(o,s[t][e]),"horizontal"===e?(o.setAttributeNS(null,"height","".concat(2*i._thumbRadius)),o.setAttributeNS(null,"width","".concat(2*i._thumbRadius*.8))):(o.setAttributeNS(null,"width","".concat(2*i._thumbRadius)),o.setAttributeNS(null,"height","".concat(2*i._thumbRadius*.8))),o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"display","none"),o.style.pointerEvents="none",o.classList.add("parkingLot-dockerArrow"),i.svgRoot.appendChild(o),i._dockerIndicators[t][e]=o;var n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttributeNS(null,"display","none"),n.style.pointerEvents="none",n.classList.add("parkingLot-docker"),i._dockerBorders[t][e]=n,i.svgRoot.appendChild(n)})})}}},{key:"_renderDockers",value:function(t){this._renderTopLeftHorizontalDocker(),this._renderTopLeftVerticalDocker();var e=t.getPlotOffset(),i=t.width()+e.left+e.right,o=t.height()+e.top+e.bottom;this._renderTopRightHorizontalDocker(i),this._renderTopRightVerticalDocker(i),this._renderBottomLeftHorizontalDocker(o),this._renderBottomLeftVerticalDocker(o),this._renderBottomRightHorizontalDocker(i,o),this._renderBottomRightVerticalDocker(i,o)}},{key:"_renderBottomRightVerticalDocker",value:function(e,i){var o=this;if(this._show&&this.bottomRightVerticalDocker.size>0){var n=0,r=0===this.bottomRightHorizontalDocker.size,a=r?0:2*this._thumbRadius;this.bottomRightVerticalDocker.forEach(function(r){var s="matrix(1 0 0 1 ".concat(e-o._thumbRadius," ").concat(i-(a+o._thumbRadius+2*o._thumbRadius*n++),")");r.setAttribute("transform",s),t.thumb.setHidden(r,!1)});var s=this.bottomRightVerticalDocker.size*this._thumbRadius*2;this._updateBorderAttributes(this._dockerBorders.bottomRight.vertical,e-2*this._thumbRadius,i-(s+a),2*this._thumbRadius,s),this._updateArrowPosition(this._dockerIndicators.bottomRight.vertical,e-2*this._thumbRadius,i-(s+a+2*this._thumbRadius*.8))}else this._dockerBorders.bottomRight.vertical.setAttributeNS(null,"display","none"),this._dockerIndicators.bottomRight.vertical.setAttributeNS(null,"display","none")}},{key:"_renderBottomRightHorizontalDocker",value:function(e,i){var o=this;if(this._show&&this.bottomRightHorizontalDocker.size>0){var n=0;this.bottomRightHorizontalDocker.forEach(function(r){var a="matrix(1 0 0 1 ".concat(e-o._thumbRadius-2*o._thumbRadius*n++," ").concat(i-o._thumbRadius,")");r.setAttribute("transform",a),t.thumb.setHidden(r,!1)});var r=this.bottomRightHorizontalDocker.size*this._thumbRadius*2;this._updateBorderAttributes(this._dockerBorders.bottomRight.horizontal,e-r,i-2*this._thumbRadius,r,2*this._thumbRadius),this._updateArrowPosition(this._dockerIndicators.bottomRight.horizontal,e-r-2*this._thumbRadius*.8,i-2*this._thumbRadius)}else this._dockerBorders.bottomRight.horizontal.setAttributeNS(null,"display","none"),this._dockerIndicators.bottomRight.horizontal.setAttributeNS(null,"display","none")}},{key:"_renderBottomLeftVerticalDocker",value:function(e){var i=this;if(this._show&&this.bottomLeftVerticalDocker.size>0){var o=0,n=0===this.bottomLeftHorizontalDocker.size,r=n?0:2*this._thumbRadius;this.bottomLeftVerticalDocker.forEach(function(n){var a="matrix(1 0 0 1 ".concat(i._thumbRadius," ").concat(e-(r+i._thumbRadius+2*i._thumbRadius*o++),")");n.setAttribute("transform",a),t.thumb.setHidden(n,!1)});var a=this.bottomLeftVerticalDocker.size*this._thumbRadius*2;this._updateBorderAttributes(this._dockerBorders.bottomLeft.vertical,0,e-(a+r),2*this._thumbRadius,a),this._updateArrowPosition(this._dockerIndicators.bottomLeft.vertical,0,e-(a+r+2*this._thumbRadius*.8))}else this._dockerBorders.bottomLeft.vertical.setAttributeNS(null,"display","none"),this._dockerIndicators.bottomLeft.vertical.setAttributeNS(null,"display","none")}},{key:"_renderBottomLeftHorizontalDocker",value:function(e){var i=this;if(this._show&&this.bottomLeftHorizontalDocker.size>0){var o=0;this.bottomLeftHorizontalDocker.forEach(function(n){var r="matrix(1 0 0 1 ".concat(i._thumbRadius+2*i._thumbRadius*o++," ").concat(e-i._thumbRadius,")");n.setAttribute("transform",r),t.thumb.setHidden(n,!1)}),this._updateBorderAttributes(this._dockerBorders.bottomLeft.horizontal,0,e-2*this._thumbRadius,this.bottomLeftHorizontalDocker.size*this._thumbRadius*2,2*this._thumbRadius),this._updateArrowPosition(this._dockerIndicators.bottomLeft.horizontal,this.bottomLeftHorizontalDocker.size*this._thumbRadius*2,e-2*this._thumbRadius)}else this._dockerBorders.bottomLeft.horizontal.setAttributeNS(null,"display","none"),this._dockerIndicators.bottomLeft.horizontal.setAttributeNS(null,"display","none")}},{key:"_renderTopRightVerticalDocker",value:function(e){var i=this;if(this._show&&this.topRightVerticalDocker.size>0){var o=0,n=0===this.topRightHorizontalDocker.size,r=n?0:2*this._thumbRadius;this.topRightVerticalDocker.forEach(function(n){var a="matrix(1 0 0 1 ".concat(e-i._thumbRadius," ").concat(r+i._thumbRadius+2*i._thumbRadius*o++,")");n.setAttribute("transform",a),t.thumb.setHidden(n,!1)}),this._updateBorderAttributes(this._dockerBorders.topRight.vertical,e-2*this._thumbRadius,r,2*this._thumbRadius,this.topRightVerticalDocker.size*this._thumbRadius*2),this._updateArrowPosition(this._dockerIndicators.topRight.vertical,e-2*this._thumbRadius,r+this.topRightVerticalDocker.size*this._thumbRadius*2)}else this._dockerBorders.topRight.vertical.setAttributeNS(null,"display","none"),this._dockerIndicators.topRight.vertical.setAttributeNS(null,"display","none")}},{key:"_renderTopRightHorizontalDocker",value:function(e){var i=this;if(this._show&&this.topRightHorizontalDocker.size>0){var o=0;this.topRightHorizontalDocker.forEach(function(n){var r="matrix(1 0 0 1 ".concat(e-i._thumbRadius-2*i._thumbRadius*o++," ").concat(i._thumbRadius,")");n.setAttribute("transform",r),t.thumb.setHidden(n,!1)});var n=this.topRightHorizontalDocker.size*this._thumbRadius*2;this._updateBorderAttributes(this._dockerBorders.topRight.horizontal,e-n,0,n,2*this._thumbRadius),this._updateArrowPosition(this._dockerIndicators.topRight.horizontal,e-n-2*this._thumbRadius*.8,0)}else this._dockerBorders.topRight.horizontal.setAttributeNS(null,"display","none"),this._dockerIndicators.topRight.horizontal.setAttributeNS(null,"display","none")}},{key:"_renderTopLeftVerticalDocker",value:function(){var e=this;if(this._show&&this.topLeftVerticalDocker.size>0){var i=0,o=0===this.topLeftHorizontalDocker.size,n=o?0:2*this._thumbRadius;this.topLeftVerticalDocker.forEach(function(o){var r="matrix(1 0 0 1 ".concat(e._thumbRadius," ").concat(n+e._thumbRadius+2*e._thumbRadius*i++,")");o.setAttribute("transform",r),t.thumb.setHidden(o,!1)}),this._updateBorderAttributes(this._dockerBorders.topLeft.vertical,0,n,2*this._thumbRadius,this.topLeftVerticalDocker.size*this._thumbRadius*2),this._updateArrowPosition(this._dockerIndicators.topLeft.vertical,0,this.topLeftVerticalDocker.size*this._thumbRadius*2+n)}else this._dockerBorders.topLeft.vertical.setAttributeNS(null,"display","none"),this._dockerIndicators.topLeft.vertical.setAttributeNS(null,"display","none")}},{key:"_renderTopLeftHorizontalDocker",value:function(){var e=this;if(this._show&&this.topLeftHorizontalDocker.size>0){var i=0;this.topLeftHorizontalDocker.forEach(function(o){var n="matrix(1 0 0 1 ".concat(e._thumbRadius+2*e._thumbRadius*i++," ").concat(e._thumbRadius,")");o.setAttribute("transform",n),t.thumb.setHidden(o,!1)}),this._updateBorderAttributes(this._dockerBorders.topLeft.horizontal,0,0,this.topLeftHorizontalDocker.size*this._thumbRadius*2,2*this._thumbRadius),this._updateArrowPosition(this._dockerIndicators.topLeft.horizontal,this.topLeftHorizontalDocker.size*this._thumbRadius*2,0)}else this._dockerBorders.topLeft.horizontal.setAttributeNS(null,"display","none"),this._dockerIndicators.topLeft.horizontal.setAttributeNS(null,"display","none")}},{key:"_updateBorderAttributes",value:function(t,e,i,o,n){t.setAttributeNS(null,"x",e.toString()),t.setAttributeNS(null,"y",i.toString()),t.setAttributeNS(null,"width",o.toString()),t.setAttributeNS(null,"height",n.toString()),t.setAttributeNS(null,"display","inline")}},{key:"_updateArrowPosition",value:function(t,e,i){t.setAttributeNS(null,"transform","matrix(1 0 0 1 ".concat(e," ").concat(i,")")),t.setAttributeNS(null,"display","inline")}},{key:"_attachConstrains",value:function(t){var e=this,i=this._createPlotValueConstrain(t),o=this._createThumbConstrain(t),n=t.getOptions();n.cursors&&(t.setPlotPositionConstrain(i),t.getCursors().forEach(function(t){t.horizontalThumbConstrain=o.horizontal,t.verticalThumbConstrain=o.vertical})),n.axisHandles&&(t.setAxisHandlePlotPositionConstrain(i),t.getAxisHandles().forEach(function(t){var i=e._createAxisHandleThumbConstrain(o,t);t.horizontalHandleConstrain=i.horizontal,t.verticalHandleConstrain=i.vertical}))}},{key:"bindEvents",value:function(t){var e=t.getEventHolder();e.addEventListener("thumbIntoRange",this._onThumbIntoRange,!1),e.addEventListener("thumbOutOfRange",this._onThumbOutOfRange,!1);var i=t.getPlaceholder()[0];i.addEventListener("thumbCreated",this._onThumbCreated,!1),i.addEventListener("thumbWillBeRemoved",this._onThumbWillBeRemoved,!1),i.addEventListener("thumbVisibilityChanged",this._onThumbVisibilityChanged,!1)}},{key:"_onThumbCreated",value:function(t,e){var i=e.detail.current;i.addEventListener("mousedown",this._onThumbMoveStart,!1),i.addEventListener("touchstart",this._onThumbMoveStart,!1),this.thumbs.add(i),this._addThumbIfWithinParkingLot(i,t)}},{key:"_onThumbWillBeRemoved",value:function(t,e){var i=e.detail.current;i.removeEventListener("mousedown",this._onThumbMoveStart),i.removeEventListener("touchstart",this._onThumbMoveStart),this.thumbs.delete(i),this._removeThumbIfOutsideParkingLot(i,t)}},{key:"_onThumbVisibilityChanged",value:function(t,e){var i=e.detail.current;e.detail.visible?this._addThumbIfWithinParkingLot(i,t):this._removeThumbIfOutsideParkingLot(i,t)}},{key:"_removeThumbIfOutsideParkingLot",value:function(t,e){var i=this._getThumbXYCoordinates(t),o=_slicedToArray(i,2),n=o[0],r=o[1],a=e.getPlotOffset();switch(t.shape){case"top":r<a.top-2*this._thumbRadius&&(this.topLeftHorizontalDocker.delete(t),this.topRightHorizontalDocker.delete(t));break;case"bottom":r>a.top+e.height()+2*this._thumbRadius&&(this.bottomLeftHorizontalDocker.delete(t),this.bottomRightHorizontalDocker.delete(t));break;case"left":n<a.left-2*this._thumbRadius&&(this.topLeftVerticalDocker.delete(t),this.bottomLeftVerticalDocker.delete(t));break;case"right":n>a.left+e.width()+2*this._thumbRadius&&(this.topRightVerticalDocker.delete(t),this.bottomRightVerticalDocker.delete(t))}}},{key:"_addThumbIfWithinParkingLot",value:function(t,e){var i=this._getThumbXYCoordinates(t),o=_slicedToArray(i,2),n=o[0],r=o[1],a=e.getPlotOffset();switch(t.shape){case"top":n<a.left?this.topLeftHorizontalDocker.add(t):n>a.left+e.width()&&this.topRightHorizontalDocker.add(t);break;case"bottom":n<a.left?this.bottomLeftHorizontalDocker.add(t):n>a.left+e.width()&&this.bottomRightHorizontalDocker.add(t);break;case"left":r<a.top?this.topLeftVerticalDocker.add(t):r>a.top+e.height()&&this.bottomLeftVerticalDocker.add(t);break;case"right":r<a.top?this.topRightVerticalDocker.add(t):r>a.top+e.height()&&this.bottomRightVerticalDocker.add(t)}}},{key:"_onThumbOutOfRange",value:function(t){var e=t.detail.orientation,i=t.detail.edge,n=t.detail.target;switch(i){case o.topLeft:"horizontal"===e?this.topLeftHorizontalDocker.add(n):this.topLeftVerticalDocker.add(n);break;case o.topRight:"horizontal"===e?this.topRightHorizontalDocker.add(n):this.topRightVerticalDocker.add(n);break;case o.bottomLeft:"horizontal"===e?this.bottomLeftHorizontalDocker.add(n):this.bottomLeftVerticalDocker.add(n);break;case o.bottomRight:"horizontal"===e?this.bottomRightHorizontalDocker.add(n):this.bottomRightVerticalDocker.add(n)}}},{key:"_onThumbIntoRange",value:function(t,i){var n=i.detail.orientation,r=i.detail.edge,a=i.detail.target,s=i.detail.position,h=t.getPlotOffset();switch(r){case o.topLeft:"horizontal"===n?(this.topLeftHorizontalDocker.delete(a),e._updateThumbPosition(a,s,h.top-this._thumbRadius)):(this.topLeftVerticalDocker.delete(a),e._updateThumbPosition(a,h.left-this._thumbRadius,s));break;case o.topRight:"horizontal"===n?(this.topRightHorizontalDocker.delete(a),e._updateThumbPosition(a,s,h.top-this._thumbRadius)):(this.topRightVerticalDocker.delete(a),e._updateThumbPosition(a,h.left+t.width()+this._thumbRadius,s));break;case o.bottomLeft:"horizontal"===n?(this.bottomLeftHorizontalDocker.delete(a),e._updateThumbPosition(a,s,h.top+t.height()+this._thumbRadius)):(this.bottomLeftVerticalDocker.delete(a),e._updateThumbPosition(a,h.left-this._thumbRadius,s));break;case o.bottomRight:"horizontal"===n?(this.bottomRightHorizontalDocker.delete(a),e._updateThumbPosition(a,s,h.top+t.height()+this._thumbRadius)):(this.bottomRightVerticalDocker.delete(a),e._updateThumbPosition(a,h.left+t.width()+this._thumbRadius,s))}if(i.detail.axisHandle){var l=i.detail.axisHandle,u="horizontal"===l.orientation?t.getXAxes()[l.axisIndex]:t.getYAxes()[l.axisIndex];if(l.absolutePosition>=u.min&&l.absolutePosition<=u.max)return;var d=s-("horizontal"===l.orientation?h.left:h.top),c=u.c2p(d),f=l.absolutePosition-c,p=u.options.offset;u.options.offset={below:p.below+f,above:p.above+f},t.setupGrid(!0),t.draw()}}},{key:"_onThumbMoveStart",value:function(t){this.thumbMoveState=null;var i=e._getThumb(t.target);if(i.classList.contains("draggable")){var o,n=!1;i.classList.contains("top")?this.topLeftHorizontalDocker.has(i)?(n=!0,o="topleft"):this.topRightHorizontalDocker.has(i)&&(n=!0,o="topright"):i.classList.contains("bottom")?this.bottomLeftHorizontalDocker.has(i)?(n=!0,o="bottomleft"):this.bottomRightHorizontalDocker.has(i)&&(n=!0,o="bottomright"):i.classList.contains("left")?this.bottomLeftVerticalDocker.has(i)?(n=!0,o="bottomleft"):this.topLeftVerticalDocker.has(i)&&(n=!0,o="topleft"):i.classList.contains("right")&&(this.bottomRightVerticalDocker.has(i)?(n=!0,o="bottomright"):this.topRightVerticalDocker.has(i)&&(n=!0,o="topright")),this.thumbMoveState={selectedElement:i,inParkingLot:n,parkingLotLocation:o}}}},{key:"_unbindEvents",value:function(t){var e=this;t.getEventHolder().removeEventListener("thumbIntoRange",this._onThumbIntoRange),t.getEventHolder().removeEventListener("thumbOutOfRange",this._onThumbOutOfRange);var i=t.getPlaceholder()[0];i.removeEventListener("thumbCreated",this._onThumbCreated),i.removeEventListener("thumbWillBeRemoved",this._onThumbWillBeRemoved),i.removeEventListener("thumbVisibilityChanged",this._onThumbVisibilityChanged),this.thumbs.forEach(function(t){t.removeEventListener("mousedown",e._onThumbMoveStart),t.removeEventListener("touchstart",e._onThumbMoveStart)}),this.thumbs.clear()}},{key:"_getThumbXYCoordinates",value:function(t){var e=t.getCTM();return[e.e,e.f]}}],[{key:"_updateThumbPosition",value:function(t,e,i){var o=t.getCTM(),n="matrix(".concat(o.a," ").concat(o.b," ").concat(o.c," ").concat(o.d," ").concat(e," ").concat(i,")");t.setAttribute("transform",n)}},{key:"_getThumb",value:function(t){for(var e=t;!e.classList.contains("thumb");)e=e.parentNode;return e}}]),e}();t.plot.plugins.push({init:e,name:"parkingLot",version:"1.1.1"})}(jQuery),function(t){function e(e){function r(t){return i(t,{name:"unnamed "+P.length,type:"range-cursor",position:t.position||{relativeXStart:.45,relativeXEnd:.55,xstart:void 0,xend:void 0,relativeYStart:.45,relativeYEnd:.55,ystart:void 0,yend:void 0},mousePosition:{relativeXStart:void 0,relativeXEnd:void 0,relativeYStart:void 0,relativeYEnd:void 0},xstart:void 0,xend:void 0,ystart:void 0,yend:void 0,startMovePosition:{x:0,y:0},show:!0,selected:!1,highlighted:!1,orientation:"vertical",halign:"top",dragLocation:"",transparentRange:"outside",showLabel:!1,showValue:!1,showBorders:!0,color:"gray",fillColor:"#4F4F4F4F",fontSize:"10px",fontFamily:"sans-serif",fontStyle:"",fontWeight:"",lineWidth:1,movable:!0,mouseButton:"all",dashes:[],defaultxaxis:1,defaultyaxis:1,constrainToEdge:!0})}function l(){z=!1,P.forEach(function(t){if(!isNaN(t.start)&&!isNaN(t.end)){var i={relativeXStart:t.position.relativeXStart||t.xstart/e.width(),relativeYStart:t.position.relativeYStart||t.ystart/e.height(),relativeXEnd:t.position.relativeXEnd||t.xend/e.width(),relativeYEnd:t.position.relativeYEnd||t.yend/e.width()};isNaN(i.relativeStart)||isNaN(i.relativeEnd)||(t.position=i)}})}function u(){z=!0,P.forEach(function(t){var i=d(e,t),o=c(e,t);t.mousePosition={},void 0===t.position.xstart&&(t.position.xstart=i.c2p?i.c2p(t.xstart):void 0),void 0===t.position.ystart&&(t.position.ystart=o.c2p?o.c2p(t.ystart):void 0),void 0===t.position.xend&&(t.position.xend=i.c2p?i.c2p(t.xend):void 0),void 0===t.position.yend&&(t.position.yend=o.c2p?o.c2p(t.yend):void 0),t.position.relativeXStart=void 0,t.position.relativeXEnd=void 0,t.position.relativeYStart=void 0,t.position.relativeYEnd=void 0})}function p(t,i,o,n,r){var a=E(P);a&&""!==a.dragLocation?(S(a,i,o),a.startMovePosition.x=i,a.startMovePosition.y=o,e.getPlaceholder().trigger("cursordrag",a),e.triggerRedrawOverlay(),t.stopImmediatePropagation(),t.preventDefault()):(a&&""!==a.dragLocation&&(a.selected=!1,a.dragLocation="",e.triggerRedrawOverlay()),O(P).forEach(function(t){var i={shape:""};t.movable&&(""!==x(n,r,e,t,i)?(t.highlighted||(t.highlighted=!0,e.triggerRedrawOverlay()),e.getPlaceholder().css("cursor",i.shape)):y(n,r,e,t)?(t.highlighted||(t.highlighted=!0,e.triggerRedrawOverlay()),e.getPlaceholder().css("cursor","move")):t.highlighted&&(t.highlighted=!1,e.getPlaceholder().css("cursor","default"),e.triggerRedrawOverlay()))}))}function v(t,i,o,n,r){var a=E(P);if(a&&""!==a.dragLocation)e.getPlaceholder().css("cursor","default"),S(a,i,o),e.triggerRedrawOverlay();else{var s,h;O(P).forEach(function(t){var a={shape:""};t.movable&&(""!==(h=x(n,r,e,t,a))?s=t:y(n,r,e,t)&&(s=t,h="between",t.startMovePosition.x=i,t.startMovePosition.y=o))}),s&&(s.selected=!0,s.dragLocation=h,e.getPlaceholder().css("cursor","move"),e.getPlaceholder().trigger("cursordragstart",s),e.triggerRedrawOverlay(),t.stopImmediatePropagation(),t.preventDefault())}}function b(t,i,o,n,r){var a=E(P);a&&(a.selected=!1,S(a,i,o),e.getPlaceholder().css("cursor","default"),e.getPlaceholder().trigger("cursordragend",a),e.triggerRedrawOverlay(),t.stopImmediatePropagation(),t.preventDefault())}function w(t,i,o,n,r){var a=E(P);a&&0===t.buttons&&(a.selected=!1,e.triggerRedrawOverlay()),O(P).forEach(function(t){k(n,r,e,t)})}function _(t){t.highlighted||(t.highlighted=!0,e.triggerRedrawOverlay())}function k(t,e,i,o){var n={shape:""};o.movable&&(""!==x(t,e,i,o,n)?(_(o),i.getPlaceholder().css("cursor",n.shape)):y(t,e,i,o)?(_(o),i.getPlaceholder().css("cursor","move")):o.highlighted&&(o.highlighted=!1,i.getPlaceholder().css("cursor","default"),i.triggerRedrawOverlay()))}function T(t,i,o,n,r){var a,s;a=d(e,t),s=c(e,t),void 0!==i&&(t.mousePosition.relativeXStart=i/e.width(),t.position.relativeXStart=i/e.width(),t.position.xstart=a.c2p?a.c2p(i):void 0),void 0!==o&&(t.mousePosition.relativeXEnd=o/e.width(),t.position.relativeXEnd=o/e.width(),t.position.xend=a.c2p?a.c2p(o):void 0),void 0!==n&&(t.mousePosition.relativeYStart=n/e.height(),t.position.relativeYStart=n/e.height(),t.position.ystart=s.c2p?s.c2p(n):void 0),void 0!==r&&(t.mousePosition.relativeYEnd=r/e.height(),t.position.relativeYEnd=r/e.height(),t.position.yend=s.c2p?s.c2p(r):void 0)}function S(t,e,i){"edge-w"===t.dragLocation?(t.xstart=e,T(t,t.xstart,t.xend,t.ystart,t.yend)):"edge-e"===t.dragLocation?(t.xend=e,T(t,t.xstart,t.xend,t.ystart,t.yend)):"edge-n"===t.dragLocation?(t.ystart=i,T(t,t.xstart,t.xend,t.ystart,t.yend)):"edge-s"===t.dragLocation?(t.yend=i,T(t,t.xstart,t.xend,t.ystart,t.yend)):"between"===t.dragLocation&&("horizontal"!==t.orientation&&(t.xstart=t.xstart+e-t.startMovePosition.x,t.xend=t.xend+e-t.startMovePosition.x),"vertical"!==t.orientation&&(t.ystart=t.ystart+i-t.startMovePosition.y,t.yend=t.yend+i-t.startMovePosition.y),T(t,t.xstart,t.xend,t.ystart,t.yend))}function R(t){var i=e.offset();return Math.max(0,Math.min(t-i.left,e.width()))}function L(t){var i=e.offset();return Math.max(0,Math.min(t-i.top,e.height()))}var P=[],z=!0;e.hooks.processOptions.push(function(t){t.getOptions().rangecursors&&t.getOptions().rangecursors.forEach(function(e){t.addRangeCursor(e)})}),e.getRangeCursors=function(){return P},e.addRangeCursor=function(t){var i=r(t);n(e,i,i.position),P.push(i),e.triggerRedrawOverlay()},e.removeRangeCursor=function(t){var i=P.indexOf(t);-1!==i&&P.splice(i,1),e.triggerRedrawOverlay()},e.setRangeCursor=function(t,o){var r=P.indexOf(t);-1!==r&&(i(o,P[r]),n(e,P[r],P[r].position),e.triggerRedrawOverlay())},e.formatCursorRange=f;var E=function(t){var e;return t.forEach(function(t){t.selected&&(e||(e=t))}),e},O=function(t){return t.filter(function(t){return t.show})},C={start:function(t){v(t,R(t.detail.touches[0].pageX),L(t.detail.touches[0].pageY),t.detail.touches[0].pageX,t.detail.touches[0].pageY)},drag:function(t){p(t,R(t.detail.touches[0].pageX),L(t.detail.touches[0].pageY),t.detail.touches[0].pageX,t.detail.touches[0].pageY)},end:function(t){var e=E(P);e&&(e.selected=!1)}},A={start:function(t){v(t,R(t.detail.touches[0].pageX),L(t.detail.touches[0].pageY),t.detail.touches[0].pageX,t.detail.touches[0].pageY)},drag:function(t){p(t,R(t.detail.touches[0].pageX),L(t.detail.touches[0].pageY),t.detail.touches[0].pageX,t.detail.touches[0].pageY)},end:function(t){var e=E(P);e&&(e.selected=!1)}},M={start:function(e){var i=t.plot.browser.getPageXY(e);v(e,R(i.X),L(i.Y),i.X,i.Y)},drag:function(e){var i=t.plot.browser.getPageXY(e);p(e,R(i.X),L(i.Y),i.X,i.Y)},mouseover:function(e){var i=t.plot.browser.getPageXY(e);w(e,R(i.X),L(i.Y),i.X,i.Y)},end:function(e){var i=t.plot.browser.getPageXY(e);b(e,R(i.X),L(i.Y),i.X,i.Y)}};e.hooks.bindEvents.push(function(t,e){e[0].addEventListener("panstart",C.start,!1),e[0].addEventListener("pandrag",C.drag,!1),e[0].addEventListener("panend",C.end,!1),e[0].addEventListener("pinchstart",A.start,!1),e[0].addEventListener("pinchdrag",A.drag,!1),e[0].addEventListener("pinchend",A.end,!1),t.getPlaceholder().bind("plotpan",u),t.getPlaceholder().bind("plotzoom",u),t.addEventHandler("dragstart",M.start,e,10),t.addEventHandler("drag",M.drag,e,10),t.addEventHandler("dragend",M.end,e,10),e.bind("mousemove",M.mouseover)}),e.hooks.processRawData.push(function(t,e,i,o){e.historyBuffer&&l()}),e.hooks.drawOverlay.push(function(t,e){var i=[],r=function(t){return void 0!==t.relativeXStart&&void 0!==t.relativeXEnd&&void 0!==t.relativeYStart&&void 0!==t.relativeYEnd};P.forEach(function(l){if(o(t,l),n(t,l,l.position),T(l,l.xstart,l.xend,l.ystart,l.yend),r(l.mousePosition)||(l.mousePosition.relativeXStart=l.xstart/t.width(),l.mousePosition.relativeXEnd=l.xend/t.width(),l.mousePosition.relativeYStart=l.ystart/t.height(),l.mousePosition.relativeYEnd=l.yend/t.height()),l.show){var u=t.getPlotOffset();e.save(),e.translate(u.left,u.top),l.showBorders&&g(t,e,l),m(t,e,l),a(t,e,l),h(t,e,l),s(t,e,l),e.restore(),i.push({rangecursor:l.name,target:l,positionMode:z,position:l.position})}}),i.length>0&&t.getPlaceholder().trigger("cursorupdates",[i])}),e.hooks.shutdown.push(function(t,e){e[0].removeEventListener("panstart",C.start),e[0].removeEventListener("pandrag",C.drag),e[0].removeEventListener("panend",C.end),e[0].removeEventListener("pinchstart",A.start),e[0].removeEventListener("pinchdrag",A.drag),e[0].removeEventListener("pinchend",A.end);var i=t.getPlaceholder();i.unbind("plotpan",u),i.unbind("plotzoom",u),e.unbind("mousedown",M.start),e.unbind("mousemove",M.move),e.unbind("mouseup",M.end),i.css("cursor","default")})}function i(t,e){return Object.keys(t).forEach(function(i){e[i]=t[i]}),e}function o(t,e){var i=d(t,e),o=c(t,e),n=e.position;void 0!==n.xstart&&void 0!==n.xend||!i.c2p||0===i.min&&1===i.max||("horizontal"!==e.orientation?(n.xstart=i.c2p(n.relativeXStart*t.width()),n.xend=i.c2p(n.relativeXEnd*t.width())):(n.xstart=i.c2p(0),n.xend=i.c2p(t.width()))),void 0!==n.ystart&&void 0!==n.yend||!o.c2p||0===o.min&&1===o.max||("vertical"!==e.orientation?(n.ystart=o.c2p(n.relativeYStart*t.height()),n.yend=o.c2p(n.relativeYEnd*t.height())):(n.ystart=o.c2p(0),n.yend=o.c2p(t.height()))),void 0!==n.relativeXStart&&void 0!==n.relativeXEnd||!i.p2c||void 0===n.xstart||void 0===n.xend||("horizontal"!==e.orientation?(n.relativeXStart=i.p2c(n.xstart)/t.width(),n.relativeXEnd=i.p2c(n.xend)/t.width()):(n.relativeXStart=0,n.relativeXEnd=1)),void 0!==n.relativeYStart&&void 0!==n.relativeYEnd||!o.p2c||void 0===n.ystart||void 0===n.yend||("vertical"!==e.orientation?(n.relativeYStart=o.p2c(n.ystart)/t.height(),n.relativeYEnd=o.p2c(n.yend)/t.height()):(n.relativeYStart=0,n.relativeYEnd=1))}function n(t,e,i){var o=d(t,e),n=c(t,e),r=void 0!==i.xstart?o.p2c?o.p2c(i.xstart):void 0:i.relativeXStart*t.width(),a=void 0!==i.xend?o.p2c?o.p2c(i.xend):void 0:i.relativeXEnd*t.width(),s=void 0!==i.ystart?n.p2c?n.p2c(i.ystart):void 0:i.relativeYStart*t.height(),h=void 0!==i.yend?n.p2c?n.p2c(i.yend):void 0:i.relativeYEnd*t.height(),l=t.width(),u=Math.abs(a-r);u>l&&(u=l);var f=t.height(),p=Math.abs(h-s);p>f&&(p=f),r>a&&!o.inverted&&(r=a-u),e.constrainToEdge&&(a>l&&(a=l,r=l-u),r<0&&(r=0,a=u),h>f&&(h=f,s=f-p),s<0&&(s=0,h=p)),"vertical"===e.orientation?(e.ystart=0,e.yend=t.height(),e.xstart=r,e.xend=a):"horizontal"===e.orientation?(e.xstart=0,e.xend=t.width(),e.ystart=s,e.yend=h):(e.xstart=r,e.xend=a,e.ystart=s,e.yend=h)}function r(t,e,i,o){var n="left",r=Number(e.fontSize.substring(0,e.fontSize.length-2)),a=e.xstart+(e.xend-e.xstart)/2,s=e.ystart+(e.yend-e.ystart)/2;if("vertical"===e.orientation?"top"===i?(s-=_.labelPadding,n="center",s-=r,e.showLabel&&e.showValue&&0===o&&(s-=r)):(s+=_.labelPadding,n="center",s+=r,1===o&&(s+=r)):"horizontal"===e.orientation?"top"===i?(a+=_.labelPadding,1===o&&(s+=r)):(a-=_.labelPadding,n="right",1===o&&(s+=r)):(n="center",1===o&&(s+=r)),!(a<0||a>t.width()||s<0||s>t.height()))return{x:a,y:s,textAlign:n}}function a(t,e,i){if(i.showLabel){var o=r(t,i,i.halign,0);if(!o)return;e.beginPath(),e.fillStyle=i.color,e.textAlign=o.textAlign,e.font=i.fontStyle+" "+i.fontWeight+" "+i.fontSize+" "+i.fontFamily,e.fillText(i.name,o.x,o.y),e.textAlign="left",e.stroke()}}function s(t,e,i){if(i.showValue){var o=f(t,i),n=r(t,i,i.halign,i.showLabel?1:0);if(!n)return;e.fillStyle=i.color,e.textAlign=n.textAlign,e.font=i.fontStyle+" "+i.fontWeight+" "+i.fontSize+" "+i.fontFamily,e.fillText(o,n.x,n.y)}}function h(t,e,i){if(i.showBorders){var o=p(t,i);if(!o)return;if(e.beginPath(),e.strokeStyle=i.color,e.lineWidth=i.lineWidth,"vertical"===i.orientation){var n=o.xstart,r=o.xend;e.moveTo(n,t.height()/2),e.lineTo(r,t.height()/2),Math.abs(n-r)>Number.EPSILON&&l(e,i,"left",i.xstart,t.height()/2),Math.abs(r-n)>Number.EPSILON&&l(e,i,"right",i.end,t.height()/2)}else if("horizontal"===i.orientation){var n=o.ystart,r=o.yend;e.moveTo(t.width()/2,n),e.lineTo(t.width()/2,r),Math.abs(n-r)>Number.EPSILON&&l(e,i,"up",t.width()/2,i.ystart),Math.abs(r-n)>Number.EPSILON&&l(e,i,"down",t.width()/2,i.yend)}e.stroke()}}function l(t,e,i,o,n){switch(i){case"left":t.moveTo(o,n),t.lineTo(o+_.arrowHeadLength,n-_.arrowHeadLength/2),t.moveTo(o,n),t.lineTo(o+_.arrowHeadLength,n+_.arrowHeadLength/2);break;case"right":t.moveTo(o,n),t.lineTo(o-_.arrowHeadLength,n-_.arrowHeadLength/2),t.moveTo(o,n),t.lineTo(o-_.arrowHeadLength,n+_.arrowHeadLength/2);break;case"up":t.moveTo(o,n),t.lineTo(o-_.arrowHeadLength/2,n+_.arrowHeadLength),t.moveTo(o,n),t.lineTo(o+_.arrowHeadLength/2,n+_.arrowHeadLength);break;case"down":t.moveTo(o,n),t.lineTo(o-_.arrowHeadLength/2,n-_.arrowHeadLength),t.moveTo(o,n),t.lineTo(o+_.arrowHeadLength/2,n-_.arrowHeadLength)}}function u(t,e,i){var o="x"===e.direction?i+1:i-1,n=e.c2p(i),r=e.c2p(o);return t.computeValuePrecision(n,r,e.direction,1)}function d(t,e){return t.getXAxes()[e.defaultxaxis-1]}function c(t,e){return t.getYAxes()[e.defaultyaxis-1]}function f(t,e){var i=d(t,e),o=c(t,e),n=u(t,i,e.xstart),r=i.tickFormatter(i.c2p(e.xend)-i.c2p(e.xstart),i,n,t);r=r.replace("<br>"," "),r=r.replace("&nbsp;"," ");var a=u(t,o,e.ystart),s=o.tickFormatter(o.c2p(e.yend)-o.c2p(e.ystart),o,a,t);return s=s.replace("<br>"," "),s=s.replace("&nbsp;"," "),"box"===e.orientation?"["+r+" "+s+"]":"vertical"===e.orientation?r:s}function p(t,e){var i=e.mousePosition.relativeXStart,o=e.mousePosition.relativeXEnd,n=e.mousePosition.relativeYStart,r=e.mousePosition.relativeYEnd;if(!(i<=0&&o<=0||n<=0&&r<=0||n>=1&&r>=1||i>=1&&o>=1))return i=i<0?0:e.xstart,n=n<0?0:e.ystart,o=o>1?t.width():e.xend,r=r>1?t.height():e.yend,{xstart:i,xend:o,ystart:n,yend:r}}function g(t,e,i){if(0!==i.lineWidth){var o=i.lineWidth%2?.5:0;e.strokeStyle=i.color,e.lineWidth=i.lineWidth,e.lineJoin="round",e.beginPath(),i.dashes.length&&e.setLineDash(i.dashes);var n=Math.floor(i.xstart)+o,r=Math.floor(i.xend)+o,a=Math.floor(i.ystart)+o,s=Math.floor(i.yend)+o;"box"===i.orientation?e.strokeRect(n,a,r-n,s-a):"vertical"===i.orientation?(e.moveTo(n,a),e.lineTo(n,s),e.moveTo(r,a),e.lineTo(r,s),e.stroke()):(e.moveTo(n,a),e.lineTo(r,a),e.moveTo(n,s),e.lineTo(r,s),e.stroke())}}function m(t,e,i){e.fillStyle=i.fillColor;var o=p(t,i);if(o){var n=o.xstart,r=o.xend,a=o.ystart,s=o.yend;"outside"===i.transparentRange?e.fillRect(n,a,r-n,s-a):(e.fillRect(0,0,t.width(),a),e.fillRect(0,a,n,s-a),e.fillRect(r,a,t.width()-r,s-a),e.fillRect(0,s,t.width(),t.height()-s))}}function v(t,e,i,o,n,r){var a=i.offset(),s=Math.max(0,Math.min(t-a.left,i.width())),h=Math.max(0,Math.min(e-a.top,i.height()));return s>o-_.mouseGrabMargin&&s<o+_.mouseGrabMargin&&h>n&&h<r}function b(t,e,i,o,n,r){var a=i.offset(),s=Math.max(0,Math.min(t-a.left,i.width())),h=Math.max(0,Math.min(e-a.top,i.height()));return h>o-_.mouseGrabMargin&&h<o+_.mouseGrabMargin&&s>n&&s<r}function y(t,e,i,o){var n=i.offset(),r=Math.max(0,Math.min(t-n.left,i.width())),a=Math.max(0,Math.min(e-n.top,i.height())),s=p(i,o);if(s){var h=s.xstart,l=s.xend,u=s.ystart,d=s.yend;return a>u+_.mouseGrabMargin&&a<d-_.mouseGrabMargin&&r>h+_.mouseGrabMargin&&r<l+_.mouseGrabMargin}}function x(t,e,i,o,n){return"horizontal"!==o.orientation&&v(t,e,i,o.xstart,o.ystart,o.yend)?(n.shape="ew-resize","edge-w"):"horizontal"!==o.orientation&&v(t,e,i,o.xend,o.ystart,o.yend)?(n.shape="ew-resize","edge-e"):"vertical"!==o.orientation&&b(t,e,i,o.yend,o.xstart,o.xend)?(n.shape="ns-resize","edge-s"):"vertical"!==o.orientation&&b(t,e,i,o.ystart,o.xstart,o.xend)?(n.shape="ns-resize","edge-n"):""}var w={cursors:[]},_={mouseGrabMargin:12,arrowHeadLength:10,labelPadding:2};t.plot.plugins.push({init:e,options:w,name:"cursors",version:"0.2"})}(jQuery),function(t,e){function i(t){return t.options.type===o.ColorScaleType}function o(){function t(t,e,i,o){!0===t.getOptions().series.intensitygraph.show&&i[0].length>0&&(o.pointsize=2,o.points.length=0,o.points.push(0,0),o.points.push(i.length||0,i[0]?i[0].length:0))}this.pluginName="intensitygraph",this.pluginVersion="0.2",this.defaultOptions={series:{intensitygraph:{data:[],show:!1,lowColor:"rgba(0,0,0,1)",highColor:"rgba(255,255,255,1)",min:0,max:1}}};var n=[{value:0,color:"#3182bd"},{value:.5,color:"#9ecae1"},{value:1,color:"#deebf7"}],r={centerX:20,centerY:0};this.init=function(a){function s(e,i){if(i.series.intensitygraph.show){i.series.intensitygraph.gradient||(i.series.intensitygraph.gradient=n);var a=e.getYAxes(),s=a.filter(function(t){return o.prototype.isColorScale(t)})[0];!s||s.boxPosition&&0!==s.boxPosition.centerX||(s.boxPosition=r),e.hooks.drawSeries.push(l),e.hooks.processRawData.push(t),f=i,i.series.intensitygraph.palette=h(i)}}function h(t){var i,o,n=document.createElement("canvas");n.width="1",n.height="256";var r,a=n.getContext("2d"),s=a.createLinearGradient(0,0,0,256),h=t.series.intensitygraph.gradient,l=h[0].value,u=h[h.length-1].value;if(u===l)s.addColorStop(0,h[0].color),s.addColorStop(1,h[0].color);else for(i=0;i<h.length;i++)o=h[i].value,(r=(o-l)/(u-l))>=0&&r<=1&&s.addColorStop(r,h[i].color);a.fillStyle=s,a.fillRect(0,0,1,256);var d=[],c=a.getImageData(0,0,1,256).data
;for(i=0;i<c.length;i++)d[i]=c[i];var f=t.series.intensitygraph.lowColor,p=t.series.intensitygraph.highColor,g=e.color.parse(f),m=e.color.parse(p);return d.push(0|g.r),d.push(0|g.g),d.push(0|g.b),d.push(255*g.a|0),d.push(0|m.r),d.push(0|m.g),d.push(0|m.b),d.push(255*m.a|0),d}function l(t,e,n){function r(t,e,i,o,n,r,a,s,h,l,u,d,c,f){var p,g,m,v,b,y,x,w,_,k,T,S,R=c-d;for(p=0;p<r;p++)for(m=0|s(e+p/f),g=a-1;g>=0;g--){for(v=0|h(o-g/f),_=u[m][v],x=0|Math.min(s(e+p/f+1),u.length),w=0|Math.min(h(o-g/f-1),u[0].length),b=m;b<x;b++)for(y=v;y<w;y++)(k=u[b][y])>_&&(_=k);for(b=m;b<x;b++)(k=u[b][v])>_&&(_=k);for(y=v;y<w;y++)(k=u[m][y])>_&&(_=k);T=_<d?1024:_>c?1028:4*Math.round(255*(_-d)/R),S=4*(a-g-1)*r+4*p,t.data[S+0]=l[T+0],t.data[S+1]=l[T+1],t.data[S+2]=l[T+2],t.data[S+3]=l[T+3]}}function a(t,e,i,o,n,r,a,s,h,l,u,d,c){var f,p,g,m,v,b,y,x,w,_,k,T,S=c-d;for(f=0;f<r;f++)for(g=e+f*s|0,p=0;p<a;p++){for(m=o+p*h|0,w=u[g][m],y=0|Math.floor(Math.min(g+s,u.length)),x=0|Math.floor(Math.min(m+h,u[0].length)),v=g;v<y;v++)for(b=m;b<x;b++)(_=u[v][b])>w&&(w=_);k=w<d?1024:w>c?1028:4*Math.round(255*(w-d)/S),T=4*(a-p-1)*r+4*f,t.data[T+0]=l[k+0],t.data[T+1]=l[k+1],t.data[T+2]=l[k+2],t.data[T+3]=l[k+3]}}function s(t,e,i,o,n,r,a,s,h,l,u){var d,c,f,p,g,m=u-l;for(d=e;d<i;d++)for(c=o;c<n;c++)f=h[d][c],p=f<l?1024:f>u?1028:4*Math.round(255*(f-l)/m),g=4*(n-c-1)*r+4*(d-e),t.data[g+0]=s[p+0],t.data[g+1]=s[p+1],t.data[g+2]=s[p+2],t.data[g+3]=s[p+3]}function h(t,e,i){return u&&u.width===e&&u.height===i||(u=t.createImageData(e,i)),u}function l(t,e){return d||(d=document.createElement("canvas"),d.className="tempCanvas",d.style.visibility="hidden",c=null),c&&d.width===t&&d.height===e||(d.width=t,d.style.width=t+"px",d.height=e,d.style.height=e+"px",c=d.getContext("2d").createImageData(t,e)),c}var p=t.getPlotOffset(),g=t.getSurface().pixelRatio,m=t.getYAxes(),v=m.filter(function(t){return i(t)})[0],b=v&&"none"!==v.options.autoScale?v.min:n.intensitygraph.min,y=v&&"none"!==v.options.autoScale?v.max:n.intensitygraph.max;n.data.length>0&&n.data[0].length>0&&(e.save(),e.beginPath(),e.rect(p.left,p.top,t.width(),t.height()),e.clip(),function(t){return!(n.xaxis.options.mode&&"linear"!==n.xaxis.options.mode||n.yaxis.options.mode&&"linear"!==n.yaxis.options.mode)}(n)?function(e,i){var n,r,u,c=0|Math.floor(Math.max(e.xaxis.min,0)),f=0|Math.ceil(Math.min(e.data.length,e.xaxis.max)),m=0|Math.floor(Math.max(e.yaxis.min,0)),v=0|Math.ceil(Math.min(e.data[0].length,e.yaxis.max)),x=e.xaxis.p2c(c),w=e.xaxis.p2c(f),_=e.yaxis.p2c(m),k=e.yaxis.p2c(v),T=Math.abs((f-c)/(w-x))/g,S=Math.abs((v-m)/(k-_))/g,R=T>1&&S>1;if(t.getYAxes().filter(function(t){return o.prototype.isColorScale(t)})[0],R){var L=Math.floor(x*g),P=Math.floor(w*g),z=Math.floor(k*g),E=Math.floor(_*g);n=P-L,r=E-z,n>0&&r>0&&(u=h(i,n,r),a(u,c,f,m,v,n,r,T,S,e.intensitygraph.palette,e.data,b,y),i.putImageData(u,Math.ceil((x+p.left)*g),Math.ceil((k+p.top)*g)))}else n=f-c,r=v-m,n>0&&r>0&&(u=l(n,r),s(u,c,f,m,v,n,r,e.intensitygraph.palette,e.data,b,y),d.getContext("2d").putImageData(u,0,0),i.imageSmoothingEnabled=!1,i.webkitImageSmoothingEnabled=!1,i.msImageSmoothingEnabled=!1,i.drawImage(d,0,0,n,r,x+p.left,k+p.top,Math.max(w-x,1),Math.max(_-k,1)))}(n,e):function(t,e){var i=Math.max(t.xaxis.min,0),o=Math.min(t.data.length,t.xaxis.max),n=Math.max(t.yaxis.min,0),a=Math.min(t.data[0].length,t.yaxis.max),s=t.xaxis.p2c(i),l=t.xaxis.p2c(o),u=t.yaxis.p2c(n),d=t.yaxis.p2c(a),c=Math.floor(s*g),f=Math.floor(l*g),m=Math.floor(d*g),v=Math.floor(u*g),x=f-c,w=v-m;if(x>0&&w>0){var _=h(e,x,w);r(_,s,l,u,d,x,w,t.xaxis.c2p,t.yaxis.c2p,t.intensitygraph.palette,t.data,b,y,g),e.putImageData(_,Math.ceil((s+p.left)*g),Math.ceil((d+p.top)*g))}}(n,e),e.restore()),function(t,e,i){var n=i&&i.show?i.box.left+10:p.left+t.width()+20,r=f.series.intensitygraph.gradient,a=f.series.intensitygraph.lowColor,s=f.series.intensitygraph.highColor;i&&i.show&&o.prototype.drawLegend(e,n,p.top,10,t.height(),r,a,s)}(t,e,v)}var u,d,c,f=null;a.hooks.processOptions.push(s)}}var n=function(t,e,i,o,n,r,a,s){var h,l,u=t.createLinearGradient(0,i+n,0,i),d=r[0].value,c=r[r.length-1].value;for(l=0;l<r.length;l++)(h=(r[l].value-d)/(c-d))>=0&&h<=1&&u.addColorStop(h,r[l].color);t.fillStyle=u,t.fillRect(e,i,o,n),t.fillStyle=a,t.fillRect(e,i+n,o,7),t.strokeStyle="#000000",t.lineWidth=1,t.strokeRect(e-.5,i+n+.5,o+1,7),t.fillStyle=s,t.fillRect(e,i-7,o,7),t.strokeStyle="#000000",t.lineWidth=1,t.strokeRect(e-.5,i-7+.5,o+1,7)};o.ColorScaleType="colorScale",o.prototype.drawLegend=n,o.prototype.isColorScale=i;var r=new o;e.plot.plugins.push({init:r.init,options:r.defaultOptions,name:r.pluginName,version:r.pluginVersion}),e.plot.IntensityGraph=o}(0,jQuery),function(t){function e(t){var e;t.hooks.processOptions.push(function(t,i){i.series.digitalWaveform&&i.series.digitalWaveform.show&&(e=new n(t,i))}),t.getDigitalWaveform=function(){return e}}var i=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"drawStep",value:function(t,e,i,o,n,r){t.beginPath(),t.strokeStyle=r,t.moveTo(e,null===n?o:n),null!==n&&o!==n&&t.lineTo(e,o),t.lineTo(i,o),t.stroke()}},{key:"drawRect",value:function(e,i,o,n,r,a,s,h,l){e.beginPath(),e.strokeStyle=a,e.moveTo(i,n),e.lineTo(o,n),l?e.lineTo(o,r):e.moveTo(o,r),e.lineTo(i,r),h&&e.lineTo(i,n),e.stroke(),s&&(e.fillStyle=t.color.parse(a).add("a",-.6),e.fillRect(i,n,o-i,r-n))}},{key:"drawRectCrossX",value:function(t,e,i,o,n,r,a,s,h,l){var u=function(t,e,i,o,n,r,a,s,h){s?(t.moveTo(e,r),t.lineTo(o,a)):t.moveTo(e,a),h?(t.lineTo(n,a),t.lineTo(i,r)):t.lineTo(i,a)};t.beginPath(),t.strokeStyle=s,u(t,e,i,o,n,(r+a)/2,r,h,l),u(t,e,i,o,n,(r+a)/2,a,h,l),t.stroke()}}]),e}(),o=function(){function t(e,i,o){_classCallCheck(this,t),this._x=e,this._state=i,this._strength=o}return _createClass(t,[{key:"equals",value:function(t){return this.state===t.state&&this.strength===t.strength}},{key:"x",get:function(){return this._x}},{key:"state",get:function(){return this._state}},{key:"strength",get:function(){return this._strength}}],[{key:"fromDatapoints",value:function(e,i){return new t(e.points[i],e.points[i+1],e.points[i+2])}}]),t}(),n=function(){function t(e,i){_classCallCheck(this,t),this._initialize(i),this._processOptions(i),this._createHooks(e),this._createPlotApi(e)}return _createClass(t,[{key:"renderer",get:function(){return this._renderer||(this._renderer=new i),this._renderer}}],[{key:"defaultOptions",get:function(){return{buses:[],series:{digitalWaveform:{show:!1,lineWidth:1,signal:{show:!0,bus:0,states:[{value:0,shape:"step_down"},{value:1,shape:"step_up"},{value:255,shape:"rect_filled",color:"#cb4b4b"},{value:254,shape:"step_center",color:"#cb4b4b"}],strengths:[{value:0,color:"#4da74d"},{value:1,color:"#3b7fed"},{value:2,color:"#cb4b4b"}]}}}}}},{key:"defaultBusOptions",get:function(){return{value:t.defaultLookupBusValue,shape:t.defaultLookupBusShape,color:t.defaultLookupBusColor,collapsed:!1,bitNumbering:"lsb",showLabels:!0,labelPosition:"center",labelFormatter:"binary"}}},{key:"defaultLookupBusValue",get:function(){return function(t){var e=t.map(function(t){return t.state}),i=e.find(function(t){return 0!==t&&1!==t});if(!i)return e.join("");switch(i){case 255:return"X";case 254:return"Z";default:return null}}}},{key:"defaultLookupBusShape",get:function(){return function(t){return t.map(function(t){return t.state}).some(function(t){return 0!==t&&1!==t})?"rect":"rect_cross_x"}}},{key:"defaultLookupBusColor",get:function(){return function(t){return t.map(function(t){return t.state}).some(function(t){return 0!==t&&1!==t})?"#cb4b4b":t.every(function(t){return 0===t.strength})?"#4da74d":"#edc240"}}}]),_createClass(t,[{key:"_initialize",value:function(t){var e=this;this._states=new Map,t.series.digitalWaveform.signal.states.forEach(function(t){e._states.set(t.value,{shape:t.shape,color:t.color})}),this._strengths=new Map,t.series.digitalWaveform.signal.strengths.forEach(function(t){e._strengths.set(t.value,{color:t.color})})}},{key:"_processOptions",value:function(e){e.buses=e.buses.map(function(e){return Object.assign(t.defaultBusOptions,e)})}},{key:"_createHooks",value:function(t){var e=this;t.hooks.processRawData.push(function(t,i,o,n){e._processRawData(t,i,o,n)}),t.hooks.adjustSeriesDataRange.push(function(t,i,o){e._adjustSeriesDataRange(t,i,o)}),t.hooks.setRange.push(function(t,i){e._setRange(t,i)}),t.hooks.draw.push(function(t,i){e._draw(t,i)})}},{key:"_createPlotApi",value:function(t){var e=this;t.expandBus=function(t){e._expandCollapseBus(this,t,!0)},t.collapseBus=function(t){e._expandCollapseBus(this,t,!1)}}},{key:"_expandCollapseBus",value:function(t,e,i){e.collapsed=!i,this._initializeSignalAndBusPositions(t)}},{key:"_processRawData",value:function(t,e,i,o){if(e.digitalWaveform.show){this._initializeSignalsAndBuses=!0,o.points=[];for(var n=e.start||0,r=e.step||1,a=0,s=0;a<i.length;a++,s=0)e.flatdata?o.points.push(n+a*r):o.points.push(i[a][s++]),Array.isArray(i[a])?(o.points.push(i[a][s++]),o.points.push(i[a][s]?i[a][s]:0)):o.points.push(i[a],0);o.pointsize=3}}},{key:"_lazyInitialize",value:function(t){var e=this;this._initializeSignalsAndBuses&&(this._busTransitionWidth=Number.POSITIVE_INFINITY,t.getOptions().buses.forEach(function(i){e._initializeBusValues(t,i)}),this._initializeSignalAndBusPositions(t),this._initializeSignalsAndBuses=!1)}},{key:"_initializeBusValues",value:function(t,e){var i=this._getBusSignals(t,e);e.visible=i.length>0,e.visible&&(e.samples=this._getBusSamples(i),e.values=e.samples.map(function(t){return e.value(t.samples)}),e.shapes=e.samples.map(function(t){return e.shape(t.samples)}),e.colors=e.samples.map(function(t){return e.color(t.samples)}))}},{key:"_getBusSignals",value:function(t,e){var i=t.getOptions().buses.indexOf(e),o=t.getData().filter(function(t){return t.digitalWaveform.signal.bus===i});switch(e.bitNumbering){case"lsb":o=o.reverse()}return o}},{key:"_getBusSamples",value:function(t){var e=this,i=t.map(function(t){for(var e=[],i=0;i<t.datapoints.points.length;i+=t.datapoints.pointsize)e.push(o.fromDatapoints(t.datapoints,i));return e}).filter(function(t){return t.length>0}),n=[];return i.length>0&&function(){for(var t=Math.max.apply(Math,_toConsumableArray(i.map(function(t){return t[0].x}))),o=Math.max.apply(Math,_toConsumableArray(i.map(function(t){return t[t.length-1].x}))),r=i.map(function(){return 0}),a=t;a<=o;){n.push({x:a,samples:i.map(function(t,e){return t[r[e]]})});var s=a;a=r.reduce(function(t,e,o){var n=i[o][e+1];return void 0!==n&&n.x<t&&(t=n.x),t},Number.POSITIVE_INFINITY),e._busTransitionWidth=Math.min(e._busTransitionWidth,.1*(a-s)),r.forEach(function(t,e){var o=i[e][t+1];void 0!==o&&o.x<=a&&r[e]++})}}(),n}},{key:"_initializeSignalAndBusPositions",value:function(t){var e=this;this._setSignalsVisibility(t),this._initializeBusPositions(t),t.getData().forEach(function(i){i.digitalWaveform.signal.visible&&e._initializeSignalPosition(t,i)})}},{key:"_setSignalsVisibility",value:function(t){var e=t.getOptions().buses;t.getData().forEach(function(t){var i=e[t.digitalWaveform.signal.bus];t.digitalWaveform.signal.visible=t.digitalWaveform.signal.show&&(!i||!i.collapsed)})}},{key:"_initializeBusPositions",value:function(t){var e=this,i=t.getData(),o=i.filter(function(t){return!t.digitalWaveform.signal.visible}),n=t.getOptions().buses.filter(function(t){return t.visible});n.forEach(function(o){var n=e._getBusSignals(t,o),r=n.map(function(t){return i.indexOf(t)}),a=Math.max.apply(Math,_toConsumableArray(r));o.index=a+1}),n.sort(function(t,e){return t.index-e.index}),n.forEach(function(t,n){var r=t.index,a=r-o.filter(function(t){return i.indexOf(t)<r}).length,s=a+n;t.index=a,t.top=e._calculateTopBoundary(s),t.bottom=e._calculateBottomBoundary(s)})}},{key:"_initializeSignalPosition",value:function(t,e){var i=t.getData(),o=t.getOptions().buses,n=i.filter(function(t){return!t.digitalWaveform.signal.visible}),r=i.indexOf(e),a=r-n.filter(function(t){return i.indexOf(t)<r}).length,s=a+o.filter(function(t){return t.index<=a}).length;e.digitalWaveform.signal.top=this._calculateTopBoundary(s),e.digitalWaveform.signal.bottom=this._calculateBottomBoundary(s)}},{key:"_adjustSeriesDataRange",value:function(t,e,i){if(this._lazyInitialize(t),e.digitalWaveform.show&&e.data.length>1){var o=e.datapoints.points,n=e.datapoints.pointsize,r=o[o.length-n]-o[o.length-2*n];i.xmax+=r}}},{key:"_setRange",value:function(t,e){switch(this._lazyInitialize(t),e.direction){case"y":var i=t.getData().filter(function(t){return t.digitalWaveform.signal.visible}),o=t.getOptions().buses.filter(function(t){return t.visible}),n=i.map(function(t){return t.digitalWaveform.signal.bottom}).concat(i.map(function(t){return t.digitalWaveform.signal.top})).concat(o.map(function(t){return t.bottom})).concat(o.map(function(t){return t.top}));e.datamin=Math.min.apply(Math,_toConsumableArray(n)),e.datamax=Math.max.apply(Math,_toConsumableArray(n))}}},{key:"_draw",value:function(t,e){this._lazyInitialize(t);var i=t.getOptions(),o=t.getPlotOffset();e.save(),e.translate(o.left,o.top),e.lineWidth=i.series.digitalWaveform.lineWidth,e.lineCap="round",e.lineJoin="round",this._drawSignals(t,e),this._drawBuses(t,e),e.restore()}},{key:"_drawSignals",value:function(t,e){var i=this;t.getData().forEach(function(t){t.digitalWaveform.signal.visible&&i._drawSignal(e,t)})}},{key:"_drawSignal",value:function(t,e){var i=e.digitalWaveform.signal.top,n=e.digitalWaveform.signal.bottom;if(!(i<e.yaxis.min||n>e.yaxis.max)){t.save(),this._clipCanvasToAxes(t,e.xaxis,e.yaxis);for(var r=e.yaxis.p2c(i),a=e.yaxis.p2c(n),s=0,h=null;s<e.datapoints.points.length;s+=e.datapoints.pointsize){var l=e.datapoints.points[s],u=s+e.datapoints.pointsize<e.datapoints.points.length?e.datapoints.points[s+e.datapoints.pointsize]:e.datapoints.points[s]+e.datapoints.points[s]-e.datapoints.points[s-e.datapoints.pointsize];if(!(l>e.xaxis.max||u<e.xaxis.min)){var d=o.fromDatapoints(e.datapoints,s),c=this._lookupStateShape(d),f=this._lookupStateColor(d);if(c&&f){var p=e.xaxis.p2c(l),g=e.xaxis.p2c(u),m=o.fromDatapoints(e.datapoints,s-e.datapoints.pointsize),v=o.fromDatapoints(e.datapoints,s+e.datapoints.pointsize);h=this._drawState(t,p,g,r,a,h,c,f,d.equals(m),d.equals(v))}else h=null}}t.restore()}}},{key:"_clipCanvasToAxes",value:function(t,e,i){var o=e.p2c(e.min),n=e.p2c(e.max),r=i.p2c(i.min),a=i.p2c(i.max);t.beginPath(),t.rect(o,a,n-o,r-a),t.clip()}},{key:"_lookupStateShape",value:function(t){var e=this._states.get(t.state);return e?e.shape:null}},{key:"_lookupStateColor",value:function(t){var e=this._states.get(t.state);if(e&&e.color)return e.color;var i=this._strengths.get(t.strength);return i?i.color:null}},{key:"_drawState",value:function(t,e,i,o,n,r,a,s,h,l){switch(a){case"step_down":this.renderer.drawStep(t,e,i,n,r,s),r=n;break;case"step_up":this.renderer.drawStep(t,e,i,o,r,s),r=o;break;case"step_center":var u=(o+n)/2;this.renderer.drawStep(t,e,i,u,r,s),r=u;break;case"rect_filled":this.renderer.drawRect(t,e,i,o,n,s,!0,!h,!l),r=null}return r}},{key:"_drawBuses",value:function(t,e){var i=this;t.getOptions().buses.forEach(function(o){o.visible&&o.samples.length>1&&i._drawBus(t,e,o)})}},{key:"_drawBus",value:function(t,e,i){this._drawBusLines(t,e,i),i.showLabels&&this._drawBusLabels(t,e,i)}},{key:"_drawBusLines",value:function(t,e,i){var o=t.getAxes(),n=i.top,r=i.bottom;if(!(n<o.yaxis.min||r>o.yaxis.max)){e.save(),this._clipCanvasToAxes(e,o.xaxis,o.yaxis);for(var a=o.yaxis.p2c(n),s=o.yaxis.p2c(r),h=0;h<i.samples.length;h++){var l=i.samples[h].x,u=h+1<i.samples.length?i.samples[h+1].x:i.samples[h].x+i.samples[h].x-i.samples[h-1].x;if(!(l>o.xaxis.max||u<o.xaxis.min)){var d=i.values[h],c=i.shapes[h],f=i.colors[h];if(d&&c&&f){var p=o.xaxis.p2c(l),g=o.xaxis.p2c(u),m=o.xaxis.p2c(l+this._busTransitionWidth/2),v=o.xaxis.p2c(u-this._busTransitionWidth/2),b=i.values[h-1],y=i.values[h+1];switch(c){case"rect":this.renderer.drawRect(e,p,g,a,s,f,!1,d!==b,d!==y);break;case"rect_cross_x":this.renderer.drawRectCrossX(e,p,g,m,v,a,s,f,d!==b,d!==y)}}}}e.restore()}}},{key:"_drawBusLabels",value:function(t,e,i){var o=t.getAxes(),n=i.top,r=i.bottom;if(!(n<o.yaxis.min||r>o.yaxis.max)){switch(e.save(),this._clipCanvasToAxes(e,o.xaxis,o.yaxis),e.font=t.getPlaceholder().css("font"),e.textBaseline="middle",i.labelPosition){case"center":e.textAlign="center";break;case"left":e.textAlign="left";break;case"right":e.textAlign="right"}for(var a=o.yaxis.p2c(n),s=o.yaxis.p2c(r),h=(a+s)/2,l=0,u=null;l<i.samples.length;l++){var d=i.values[l],c=i.values[l+1];if(d&&(null===u&&(u=i.samples[l].x),d!==c)){var f=l+1<i.samples.length?i.samples[l+1].x:i.samples[l].x+i.samples[l].x-i.samples[l-1].x;if(u<=o.xaxis.max&&f>=o.xaxis.min){var p=this._busTransitionWidth,g=void 0;switch(i.labelPosition){case"center":g=o.xaxis.p2c((u+f)/2);break;case"left":g=o.xaxis.p2c(u+p/2);break;case"right":g=o.xaxis.p2c(f-p/2)}var m=this._getFormattedBusValue(i,d),v=o.xaxis.p2c(f-p)-o.xaxis.p2c(u+p);this._drawText(e,g,h,m,v)}u=null}}e.restore()}}},{key:"_getFormattedBusValue",value:function(t,e){var i=parseInt(e,2);switch(t.labelFormatter){case"binary":var o=e.length;return isNaN(i)?e:i.toString(2).padStart(o,0);case"decimal":var n=Math.ceil(Math.log10(Math.pow(2,e.length)));return isNaN(i)?e:i.toString(10).padStart(n,0);case"hex":var r=Math.ceil(Math.log(Math.pow(2,e.length))/Math.log(16));return isNaN(i)?e:i.toString(16).toUpperCase().padStart(r,0);default:return e}}},{key:"_drawText",value:function(t,e,i,o,n){var r=this._getFittingText(t,o,n);t.fillText(r,e,i)}},{key:"_getFittingText",value:function(t,e,i){var o=t.measureText("...").width,n=t.measureText(e).width;if(n>i&&n>o){for(;n+o>i&&e.length>1;)e=e.substring(0,e.length-1),n=t.measureText(e).width;e+="..."}return e}},{key:"_calculateTopBoundary",value:function(t){return.9+1*t}},{key:"_calculateBottomBoundary",value:function(t){return(1-.8)/2+1*t}}]),t}();t.plot.plugins.push({init:e,options:n.defaultOptions,name:"digitalWaveform",version:"1.0"})}(jQuery),function(t){function e(t){var e=function(t){return"digital"===t.options.type};return t.getYAxes().filter(function(t){return e(t)})[0]}function i(t){t.hooks.processOptions.push(o)}function o(t,i){var o=e(t);if(o){t.hooks.processDatapoints.push(n),t.hooks.processOffset.push(r),t.hooks.draw.push(a),o.options.show=!1;for(var s=0;s<i.buses.length;s++)i.buses[s].label||(i.buses[s].label="Bus ".concat(s+1))}}function n(t,e,i){if(e.digitalWaveform.show&&!e.label){var o=t.getData();e.label="Signal ".concat(o.indexOf(e)+1)}}function r(t,i){var o=t.getPlaceholder(),n=e(t);if("automatic"===n.options.width){var r=t.getData(),a=t.getOptions().buses,s=0,h=function(t){t.css("visibility","hidden"),o.append(t);var e=t.outerWidth();return t.remove(),e};if(r.forEach(function(t){if(t.digitalWaveform.signal.visible){var e=void 0!==a[t.digitalWaveform.signal.bus],i=u(0,0,t.label,n.options.signalSymbol,e),o=h(i);s=Math.max(s,o)}}),a.forEach(function(t){var e=l(0,0,t.label,n.options.busSymbolCollapsed,!1),i=h(e);s=Math.max(s,i)}),s>0){var d=(s+10)/o.width(),c=Math.min(d,.5);n.options.elementWidth=o.width()*c}}else n.options.elementWidth=n.options.width;i.left+=n.options.elementWidth}function a(t,e){var i=t.getPlaceholder(),o=s(t);i.append(o)}function s(i){var o=i.getPlaceholder(),n="flot-digital-axis",r=o.find("#".concat(n));0===r.length?r=t('<div id="'.concat(n,'"></div>')):r.empty();var a=e(i),s=i.getPlotOffset();r.css({width:"".concat(a.options.elementWidth,"px"),position:"absolute",top:s.top,bottom:s.bottom,overflow:"hidden"});var u=i.getData(),d=i.getOptions().buses;return d.forEach(function(t,e){if(t.visible){var o=u.filter(function(t){return t.digitalWaveform.signal.bus===e}),n=o.some(function(t){return t.digitalWaveform.signal.visible}),s=function(){n?i.collapseBus(t):i.expandBus(t),i.setupGrid(!0),i.draw()},d=n?a.options.busSymbolExpanded:a.options.busSymbolCollapsed,c=l(a.p2c(t.top),a.p2c(t.bottom),t.label,d,n,s);r.append(c),o.forEach(function(t){t.digitalWaveform.signal.visible&&h(r,t,u,a,!0)})}}),u.filter(function(t){return!d[t.digitalWaveform.signal.bus]}).forEach(function(t){t.digitalWaveform.signal.visible&&h(r,t,u,a,!1)}),r}function h(t,e,i,o,n){var r=e.digitalWaveform.signal,a=o.options.signalSymbol,s=u(o.p2c(r.top),o.p2c(r.bottom),e.label,a,n);t.append(s)}function l(t,e,i,o,n,r){var a=d(t,e);a.addClass("flot-digital-axis-bus");var s=f(n?"arrow-up":"arrow-down",o);return s.css({cursor:"pointer"}),s.click(r),s.appendTo(a),c(i).appendTo(a),a}function u(t,e,i,o,n){var r=d(t,e);return r.addClass("flot-digital-axis-signal"),n&&r.css("padding-left","25px"),f("digital-signal",o).appendTo(r),c(i).appendTo(r),r}function d(e,i){return t("<div>",{css:{position:"absolute",top:e,height:i-e,display:"flex","align-items":"center"}})}function c(e){return t("<div>",{css:{order:2,"white-space":"nowrap"}}).append(t("<span>",{html:e}))}function f(e,i){var o=t("<div>",{css:{order:1,display:"flex","align-items":"center","margin-right":"10px"}});if(i)o.append(i);else{o.css("width","12px");var n=t(document.createElementNS("http://www.w3.org/2000/svg","svg"));n.css({width:"100%",height:"100%"}),n.attr({viewBox:"0 0 100 100"}),n.appendTo(o);var r=t(document.createElementNS("http://www.w3.org/2000/svg","path"));r.attr({stroke:"black","stroke-width":15,fill:"transparent",d:function(t){switch(t){case"arrow-down":return"M10 25 L 50 75 L 90 25";case"arrow-up":return"M10 75 L 50 25 L 90 75";case"digital-signal":return"M0 80 L 50 80 L 50 20 L 100 20";default:return null}}(e)}),r.appendTo(n)}return o}var p={yaxis:{width:"automatic"}};t.plot.plugins.push({init:i,options:p,name:"digitalAxis",version:"1.0"})}(jQuery),function(t){function e(t){var e;t.hooks.processOptions.push(function(t,o){o.series.highlights&&o.series.highlights.show&&(e=new i(t,o))}),t.getHighlights=function(){return e}}var i=function(){function e(t,i){_classCallCheck(this,e),this._processOptions(i),this._createHooks(t)}return _createClass(e,null,[{key:"defaultOptions",get:function(){return{series:{highlights:{selectedRange:[],selectedIndexes:[],show:!1,highlightLineWidth:1,highlightColor:"#ffffff",highlightPoints:!0,highlightLines:!1,highlightBars:!1}}}}}]),_createClass(e,[{key:"_createHooks",value:function(t){var e=this;t.hooks.drawOverlay.push(function(t,i,o){e._drawOverlay(t,i,o)})}},{key:"_processOptions",value:function(e){t.extend(!0,e,this.defaultOptions),this._options=e.series.highlights}},{key:"_drawOverlay",value:function(t,e){var i=t.getData();if(this._options.show){var o=t.getPlotOffset();e.save(),e.translate(o.left,o.top),e.lineWidth=this._options.lineWidth,e.lineCap="round",e.lineJoin="round";for(var n=0;n<i.length;n++){var r=i[n].datapoints.pointsize,a=this._options.selectedIndexes[n];if(a)for(var s=0;s<a.length;s++){var h=a[s];this._options.highlightPoints&&this._drawPointHighlight(i[n],t,e,h),this._options.highlightBars&&this._drawBarHighlight(i[n],[i[n].datapoints.points[h*r],i[n].datapoints.points[h*r+1]],e)}var l=this._options.selectedRange[n];if(l){for(var u=l[0];u<l[1];u++)this._options.highlightPoints&&this._drawPointHighlight(i[n],t,e,u),this._options.highlightBars&&this._drawBarHighlight(i[n],[i[n].datapoints.points[u*r],i[n].datapoints.points[u*r+1]],e);this._options.highlightLines&&this._drawLineHighlight(i[n],t,e,l)}this._options.highlightLines&&a&&a.length>0&&this._drawLineHighlight(i[n],t,e)}e.restore()}}},{key:"_drawPointHighlight",value:function(e,i,o,n){var r=e.datapoints.pointsize,a=e.datapoints.points[n*r],s=e.datapoints.points[n*r+1],h=e.xaxis,l=e.yaxis,u="string"==typeof this._options.highlightColor?this._options.highlightColor:t.color.parse(e.color).scale("a",.5).toString();if(!(a<h.min||a>h.max||s<l.min||s>l.max)){o.save();var d=e.points.radius+e.points.lineWidth/2;o.lineWidth=d,o.strokeStyle=u,o.fillStyle=u,o.shadowColor="black",o.shadowBlur=3,o.shadowOffsetY=1;var c=1.5*d;a=h.p2c(a),s=l.p2c(s),o.beginPath();var f=e.points.symbol;"circle"===f?o.arc(a,s,c,0,2*Math.PI,!1):"string"==typeof f&&i.drawSymbol&&i.drawSymbol[f]&&i.drawSymbol[f](o,a,s,c,!1),o.closePath(),o.fill(),o.restore()}}},{key:"_drawLineHighlight",value:function(e,i,o,n){var r,a=this,s=e.datapoints.pointsize,h=i.getPlotOffset();o.translate(-h.left,-h.top);var l=e.lines.lineWidth,u=e.color;e.lines.lineWidth+=this._options.lineWidth,e.color=this._options.highlightColor,n&&(r=_toConsumableArray(e.datapoints.points),e.datapoints.points.splice(n[1]*s),e.datapoints.points.splice(0,n[0]*s)),t.plot.drawSeries.drawSeriesLines(e,o,h,i.width(),i.height(),i.drawSymbol,function(){return a._options.highlightColor}),n&&(e.datapoints.points=r),e.lines.lineWidth=l,e.color=u,t.plot.drawSeries.drawSeriesLines(e,o,h,i.width(),i.height(),i.drawSymbol,function(){return a._options.highlightColor}),t.plot.drawSeries.drawSeriesPoints(e,o,h,i.width(),i.height(),i.drawSymbol,function(){return a._options.highlightColor}),o.translate(h.left,h.top)}},{key:"_drawBarHighlight",value:function(e,i,o){var n,r="string"==typeof this._options.highlightColor?this._options.highlightColor:t.color.parse(e.color).scale("a",.5).toString(),a=e.bars.barWidth[0]||e.bars.barWidth;switch(e.bars.align){case"left":n=0;break;case"right":n=-a;break;default:n=-a/2}o.lineWidth=e.bars.lineWidth,o.strokeStyle=r;var s=e.bars.fillTowards||0,h=s>e.yaxis.min?Math.min(e.yaxis.max,s):e.yaxis.min;t.plot.drawSeries.drawBar(i[0],i[1],i[2]||h,n,n+a,function(){return"transparent"},e.xaxis,e.yaxis,o,e.bars.horizontal,e.bars.lineWidth)}}]),e}();t.plot.plugins.push({init:e,options:i.defaultOptions,name:"highlights",version:"1.0"})}(jQuery),function(t){function e(){if(!(this instanceof e))return arguments.length>1||"number"!=typeof arguments[0]?e.apply(new e(arguments.length),arguments):new e(arguments[0]);if(0===arguments.length)throw new Error("Missing Argument: You must pass a valid buffer length");return this.size=this.start=0,this.overflow=null,arguments.length>1||"number"!=typeof arguments[0]?(this.data=new Array(arguments.length),this.end=(this.length=arguments.length)-1,this.push.apply(this,arguments)):(this.data=new Array(arguments[0]),this.end=(this.length=arguments[0])-1),this}function i(t,e){return t==e?0:t>e?1:-1}e.prototype={constructor:e,pop:function(){var t;if(0!==this.size)return t=this.data[this.end],delete this.data[this.end],this.end=(this.end-1+this.length)%this.length,this.size--,t},push:function(t){return this.data[(this.end+1)%this.length]=t,this.size<this.length&&this.size++,this.end=(this.end+1)%this.length,this.start=(this.length+this.end-this.size+1)%this.length,this.size},reverse:function(){for(var t,e=0;e<~~(this.size/2);e++)t=this.data[(this.start+e)%this.length],this.data[(this.start+e)%this.length]=this.data[(this.start+(this.size-e-1))%this.length],this.data[(this.start+(this.size-e-1))%this.length]=t;return this},rotateLeft:function(t){if(void 0===t&&(t=1),"number"!=typeof t)throw new Error("Argument must be a number");for(;--t>=0;)this.push(this.shift());return this},rotateRight:function(t){if(void 0===t&&(t=1),"number"!=typeof t)throw new Error("Argument must be a number");for(;--t>=0;)this.unshift(this.pop());return this},shift:function(){var t;if(0!==this.size)return t=this.data[this.start],this.start=(this.start+1)%this.length,this.size--,t},sort:function(t){return this.data.sort(t||i),this.start=0,this.end=this.size-1,this},unshift:function(){var t=0;if(this.overflow&&this.size+arguments.length>this.length)for(;t<this.size+arguments.length-this.length;t++)this.overflow(this.data[this.end-t%this.length],this);for(t=0;t<arguments.length;t++)this.data[(this.length+this.start-t%this.length-1)%this.length]=arguments[t];return this.length-this.size-t<0&&(this.end+=this.length-this.size-t,this.end<0&&(this.end=this.length+this.end%this.length)),this.size<this.length&&(this.size+t>this.length?this.size=this.length:this.size+=t),this.start-=arguments.length,this.start<0&&(this.start=this.length+this.start%this.length),this.size},indexOf:function(t,e){for(e||(e=0);e<this.size;e++)if(this.data[(this.start+e)%this.length]===t)return e;return-1},lastIndexOf:function(t,e){for(e||(e=this.size-1);e>=0;e--)if(this.data[(this.start+e)%this.length]===t)return e;return-1},sortedIndex:function(t,e,o){e=e||i;var n=this.start,r=this.size-1;for(n&&e.call(o,t,this.data[r])>0&&(n=0,r=this.end);n<r;){var a=n+r>>>1;e.call(o,t,this.data[a])>0?n=a+1:r=a}return((n-this.start)%this.size+this.size)%this.size},every:function(t,e){for(var i=0;i<this.size;i++)if(!t.call(e,this.data[(this.start+i)%this.length],i,this))return!1;return!0},forEach:function(t,e){for(var i=0;i<this.size;i++)t.call(e,this.data[(this.start+i)%this.length],i,this)},some:function(t,e){for(var i=0;i<this.size;i++)if(t.call(e,this.data[(this.start+i)%this.length],i,this))return!0;return!1},avg:function(){return 0==this.size?0:this.sum()/this.size},sum:function(){for(var t=this.size,e=0;t--;)e+=this.data[t];return e},median:function(){if(0===this.size)return 0;var t=this.slice().sort(i),e=Math.floor(t.length/2);return t.length%2?t[e]:(t[e-1]+t[e])/2},empty:function(){return this.size=this.start=0,this.end=this.length-1,this},fill:function(t){var e=0;if("function"==typeof t)for(;this.data[e]=t(),++e<this.length;);else for(;this.data[e]=t,++e<this.length;);return this.start=0,this.end=this.length-1,this.size=this.length,this},first:function(){return this.data[this.start]},last:function(){return this.data[this.end]},get:function(t){return this.data[(this.start+t)%this.length]},isFull:function(t){return this.length===this.size},set:function(t,e){return this.data[(this.start+t)%this.length]=e},toArray:function(){return this.slice()},slice:function(t,e){var i=this.size;if((t=+t||0)<0){if(t>=e)return[];t=-t>i?0:i+t}null==e||e>i?e=i:e<0?e+=i:e=+e||0,i=t<e?e-t:0;for(var o=Array(i),n=0;n<i;n++)o[n]=this.data[(this.start+t+n)%this.length];return o}},"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e:t.CBuffer=e}(window),function(t){var e=function(t,e){this.hb=new HistoryBufferNumeric(t,e),this.hbType="numeric"};e.prototype.setType=function(t){var e=this;if(t!==this.hbType){if("numeric"===t){var i=this.hb.callbacks;this.hb.callbacks=void 0,this.hb=new HistoryBufferNumeric(this.capacity,this.width),i.forEach(function(t,i){e.hb.registerOnChange(i,t)}),this.hbType="numeric",this.hb.callOnChange()}if("analogWaveform"===t){var i=this.hb.callbacks;this.hb.callbacks=void 0,this.hb=new HistoryBufferWaveform(this.capacity,this.width),i.forEach(function(t,i){e.hb.registerOnChange(i,t)}),this.hbType="analogWaveform",this.hb.callOnChange()}}},e.prototype.clear=function(){this.hb.clear()},e.prototype.setCapacity=function(t){this.hb.setCapacity(t)},e.prototype.setWidth=function(t){this.hb.setWidth(t)},e.prototype.push=function(t){this.hb.push(t)},e.prototype.startIndex=function(){return this.hb.startIndex()},e.prototype.lastIndex=function(){return this.hb.lastIndex()},e.prototype.get=function(t){return this.hb.get(t)},e.prototype.appendArray=function(t){this.hb.appendArray(t)},e.prototype.toArray=function(){return this.hb.toArray()},e.prototype.toDataSeries=function(t){return this.hb.toDataSeries(t)},e.prototype.registerOnChange=function(t,e){this.hb.registerOnChange(t,e)},e.prototype.deregisterOnChange=function(t,e){this.hb.deregisterOnChange(t,e)},e.prototype.query=function(t,e,i,o){return this.hb.query(t,e,i,o)},e.prototype.rangeX=function(t){return this.hb.rangeX(t)},e.prototype.rangeY=function(t,e,i){return this.hb.rangeY(t,e,i)},e.prototype.toJSON=function(){return this.hb.toJSON()},Object.defineProperty(e.prototype,"width",{get:function(){return this.hb.width}}),Object.defineProperty(e.prototype,"count",{get:function(){return this.hb.count},set:function(t){this.hb.count=t}}),Object.defineProperty(e.prototype,"capacity",{get:function(){return this.hb.capacity}}),"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e:t.HistoryBuffer=e}(window),function(t){var e=function(t,e){this.capacity=t||1024,this.width=e||1,this.lastUpdatedIndex=0,this.firstUpdatedIndex=0,this.branchFactor=32,this.buffers=[],this.trees=[]
;for(var i=0;i<this.width;i++)this.buffers.push(new CBuffer(t)),this.trees.push(new SegmentTree(this,this.buffers[i]));this.buffer=this.buffers[0],this.tree=this.trees[0],this.count=0,this.callbacks=new Map,this.changed=!1};e.prototype.callOnChange=function(t){this.callbacks.forEach(function(e){e(t)})},e.prototype.setBranchingFactor=function(t){this.branchFactor=t,this.rebuildSegmentTrees()},e.prototype.getDefaultBranchingFactor=function(){return 32},e.prototype.rebuildSegmentTrees=function(){this.trees=[];for(var t=0;t<this.width;t++)this.trees.push(new SegmentTree(this,this.buffers[t]));this.tree=this.trees[0],this.firstUpdatedIndex=this.startIndex(),this.lastUpdatedIndex=this.firstUpdatedIndex,this.updateSegmentTrees()},e.prototype.clear=function(){for(var t=0;t<this.width;t++)this.buffers[t].empty();this.count=0,this.rebuildSegmentTrees(),this.changed=!0,this.callOnChange&&this.callOnChange()},e.prototype.setCapacity=function(t){if(t!==this.capacity){this.capacity=t,this.buffers=[];for(var e=0;e<this.width;e++)this.buffers.push(new CBuffer(t));this.buffer=this.buffers[0],this.count=0,this.rebuildSegmentTrees(),this.changed=!0,this.callOnChange&&this.callOnChange()}},e.prototype.setWidth=function(t){if(t!==this.width){this.width=t,this.buffers=[];for(var e=0;e<this.width;e++)this.buffers.push(new CBuffer(this.capacity));this.buffer=this.buffers[0],this.count=0,this.rebuildSegmentTrees(),this.changed=!0,this.callOnChange&&this.callOnChange()}},e.prototype.getWidth=function(){return this.width},e.prototype.pushNoStatsUpdate=function(t){if("number"==typeof t&&1===this.width)this.buffer.push(t);else if(Array.isArray(t)&&t.length===this.width)for(var e=0;e<this.width;e++)this.buffers[e].push(t[e])},e.prototype.push=function(t){this.pushNoStatsUpdate(t),this.count++,this.changed=!0,this.callOnChange&&this.callOnChange()},e.prototype.startIndex=function(){return Math.max(0,this.count-this.capacity)},e.prototype.lastIndex=function(){return this.startIndex()+this.buffer.size},e.prototype.get=function(t){if(t-=this.startIndex(),1===this.width)return this.buffer.get(t);for(var e=[],i=0;i<this.width;i++)e.push(this.buffers[i].get(t));return e},e.prototype.appendArray=function(t){for(var e=0;e<t.length;e++)this.pushNoStatsUpdate(t[e]);this.count+=t.length,this.changed=!0,this.callOnChange&&this.callOnChange()},e.prototype.toArray=function(){if(1===this.width)return this.buffer.toArray();for(var t=this.startIndex(),e=this.lastIndex(),i=[],o=t;o<e;o++)i.push(this.get(o));return i},e.prototype.updateSegmentTrees=function(){var t=this.buffer;this.trees.forEach(function(t){t.updateSegmentTree()}),this.firstUpdatedIndex=this.startIndex(),this.lastUpdatedIndex=this.firstUpdatedIndex+t.size},e.prototype.toDataSeries=function(t){for(var e=this.buffer,i=[],o=this.startIndex(),n=0;n<e.size;n++)i.push([n+o,this.buffers[t||0].get(n)]);return i},e.prototype.registerOnChange=function(t,e){if(this.callbacks.has(t))return void console.log("Callback with the given key has already been registered.");this.callbacks.set(t,e)},e.prototype.deregisterOnChange=function(t){this.callbacks.delete(t)},e.prototype.query=function(t,e,i,o){return void 0===o&&(o=0),this.changed&&(this.updateSegmentTrees(),this.changed=!1),this.trees[o].query(t,e,i)},e.prototype.rangeX=function(t){var e=this.startIndex(),i=this.lastIndex()-1;return i===e-1?{}:{xmin:e,xmax:i,deltamin:1}},e.prototype.rangeY=function(t,e,i){null!==t&&void 0!==t||(t=this.startIndex()),null!==e&&void 0!==e||(e=this.lastIndex()-1),null!==i&&void 0!==i||(i=0),this.changed&&(this.updateSegmentTrees(),this.changed=!1);var o=this.query(t,e,e-t,i),n=o.length;if(n>0){for(var r={ymin:1/0,ymax:-1/0},a=0;a<n;a+=2)null==o[a+1]||o[a+1]===1/0||o[a+1]===-1/0||isNaN(o[a+1])||(r.ymin=Math.min(r.ymin,o[a+1]),r.ymax=Math.max(r.ymax,o[a+1]));return r}return{}},e.prototype.toJSON=function(){var t={data:[],width:this.width,capacity:this.capacity,valueType:"HistoryBuffer",startIndex:this.startIndex(),count:this.count};if(1===this.width)t.data=this.buffer.toArray();else for(var e=0;e<this.width;e++)t.data.push(this.buffers[e].toArray());return t},"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e:t.HistoryBufferNumeric=e}(window),function(t){function e(t,e,i){if(0===t.Y.length)return!1;var o=new NITimestamp(t.t0),n=o.valueOf(),r=o.valueOf()+t.Y.length*t.dt;return!(n<e&&r<e)&&!(n>i&&r>i)}function i(t,e){if(1==t.Y.length||1==e.Y.length)return!1;var i=new NITimestamp(t.t0).add(t.dt*(t.Y.length-1)).valueOf();return new NITimestamp(e.t0).valueOf()-i>=2*t.dt}function o(t,e,i,o){for(var n,r=t.Y,a=t.t0,s=new NITimestamp(a),h=0;h<r.length;h++)n=s.valueOf(),n>=e-t.dt&&n<=i+t.dt&&(o.push(n),o.push(r[h])),s.add(t.dt)}function n(t,e){for(var i,o=t.Y,n=t.t0,r=new NITimestamp(n),a=0;a<o.length;a++)i=r.valueOf(),e.push([i,o[a]]),r.add(t.dt)}function r(t,e,i,o){var n,r,a,s=t.Y,h=new NITimestamp(t.t0);if(0!==s.length&&(n=h.valueOf(),r=new NITimestamp(h).add(t.dt*t.Y.length).valueOf(),!(n>o||r<i)))for(var l=0;l<s.length;l++)(a=new NITimestamp(h).add(t.dt*l).valueOf())<i||a>o||null==s[l]||s[l]===1/0||s[l]===-1/0||isNaN(s[l])||(s[l]>e.max&&(e.max=s[l]),s[l]<e.min&&(e.min=s[l]))}var a=function(t,e){this.capacity=t||1024,this.width=e||1,this.buffers=[];for(var i=0;i<this.width;i++)this.buffers.push(new CBuffer(t));this.buffer=this.buffers[0],this.count=0,this.callbacks=new Map,this.changed=!1};a.prototype.__proto__=HistoryBufferNumeric.prototype,a.prototype.rebuildSegmentTrees=function(){},a.prototype.pushNoStatsUpdate=function(t){if(1!==this.width||Array.isArray(t)){if(Array.isArray(t)&&t.length===this.width)for(var e=0;e<this.width;e++)this.buffers[e].push(t[e])}else this.buffer.push(t)},a.prototype.getTreeNodes=function(t,e,i){},a.prototype.updateSegmentTrees=function(){},a.prototype.query=function(t,n,r,a){void 0===a&&(a=0);var s=[],h=this.buffers[a].toArray(),l=h[0];return h.forEach(function(r){e(r,t,n)&&(i(l,r)&&(s.push(null),s.push(null)),l=r,o(r,t,n,s))}),s},a.prototype.toDataSeries=function(t){void 0===t&&(t=0);var e=[],o=this.buffers[t].toArray(),r=o[0];return o.forEach(function(t){i(r,t)&&e.push([null,null]),r=t,n(t,e)}),e},a.prototype.rangeX=function(t){var e,i,o,n=1/0,r=-1/0,a=1/0;void 0===t&&(t=0);var s=this.buffers[t].toArray();if(0===s.length)return{};if(s.forEach(function(t){e=new NITimestamp(t.t0),i=e.valueOf(),o=new NITimestamp(e).add(t.dt*(t.Y.length-1)).valueOf(),i<n&&(n=i),o>r&&(r=o),a>Math.abs(t.dt)&&(a=Math.abs(t.dt))}),0===a&&(a=1),n>r){var h=n;n=r,r=h}return{xmin:n,xmax:r,deltamin:a}},a.prototype.rangeY=function(t,e,i){var o={min:1/0,max:-1/0};null!==i&&void 0!==i||(i=0);var n=this.buffers[i].toArray();if(0===n.length)return{};if(null!==t&&void 0!==t||(t=new NITimestamp(n[0].t0).valueOf()),null===e||void 0===e){var a=n[n.length-1];e=new NITimestamp(a.t0).add(a.dt*a.Y.length).valueOf()}return n.forEach(function(i){r(i,o,t,e)}),{ymin:o.min,ymax:o.max}},a.prototype.toJSON=function(){return{data:this.toArray(),width:this.width,capacity:this.capacity,valueType:"HistoryBuffer",startIndex:this.startIndex(),count:this.count}},"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=a:t.HistoryBufferWaveform=a}(window),function(t){function e(t,e,i){e<i.min&&(i.min=e,i.minIndex=t),e>i.max&&(i.max=e,i.maxIndex=t)}function i(t,e){t.min<e.min&&(e.min=t.min,e.minIndex=t.minIndex),t.max>e.max&&(e.max=t.max,e.maxIndex=t.maxIndex)}function o(t,e){return e*Math.floor(t/e)}var n=function(){this.init()},r=function(t,e){this.historyBuffer=t,this.cbuffer=e,this.tree=this.buildEmptySegmentTree()};n.prototype.init=function(){this.maxIndex=0,this.minIndex=0,this.max=Math.Nan,this.min=Math.Nan};var a=function(t,e){this.level=e,this.step=Math.pow(t.branchFactor,e),this.capacity=Math.ceil(t.capacity/Math.pow(t.branchFactor,e))+1,this.startIndex=0,this.nodes=new CBuffer(this.capacity)};a.prototype.rotate=function(){this.startIndex+=this.step;var t=this.nodes.shift();t.init(),this.nodes.push(t)},a.prototype.init=function(t){this.startIndex=t,this.nodes.forEach(function(t){t.init()})},r.prototype.get=function(t){return t-=this.historyBuffer.startIndex(),this.cbuffer.get(t)},r.prototype.getTreeNode=function(t,e){var i=this.tree.levels[t],o=i.step,n=Math.floor((e-i.startIndex)/o);return n<0||n>=i.capacity?null:i.nodes.get(n)},r.prototype.buildEmptySegmentTree=function(){var t=this.historyBuffer,e=Math.ceil(Math.log(t.capacity)/Math.log(t.branchFactor))-1;e<1&&(e=1);for(var i={depth:e,levels:[]},o=0;o<e;o++){var r=new a(t,o+1);i.levels.push(r);for(var s=0;s<r.capacity;s++){var h=new n;r.nodes.push(h)}}return i},r.prototype.populateTreeLevel=function(t,e){var i,n,r,a,s,h=this.historyBuffer,l=this.cbuffer,u=h.startIndex(),d=h.lastIndex(),c=0,f=0,p=!0,g={step:1,startIndex:u},m=0===e?g:this.tree.levels[e-1],v=this.tree.levels[e];for(t=o(t,v.step),m.startIndex>t&&(t=m.startIndex,c=t/m.step%h.branchFactor),f=t;f<d;f+=m.step){if(0===e){var b=l.get(f-u);p?(n=b,r=f,a=b,s=f,p=!1):(b>n&&(n=b,r=f),b<a&&(a=b,s=f))}else{var y=this.getTreeNode(e-1,f);p?(n=y.max,r=y.maxIndex,a=y.min,s=y.minIndex,p=!1):(y.max>n&&(n=y.max,r=y.maxIndex),y.min<a&&(a=y.min,s=y.minIndex))}c++,c===h.branchFactor&&(c=0,p=!0,i=this.getTreeNode(e,f),i.max=n,i.maxIndex=r,i.min=a,i.minIndex=s)}0!==c&&(i=this.getTreeNode(e,f),i.max=n,i.maxIndex=r,i.min=a,i.minIndex=s)},r.prototype.rotateTreeLevel=function(t){var n=this.historyBuffer,r=n.startIndex(),a=this.tree.levels[t],s=o(r,a.step);if(s-a.startIndex>n.capacity)a.init(s);else for(;a.startIndex<s;)a.rotate();if(r!==s){var h,l={minIndex:r,min:this.get(r),maxIndex:r,max:this.get(r)},u=a.nodes.get(0);if(0===t)for(h=r;h<s+n.branchFactor;h++)e(h,this.get(h),l);else for(h=r;h<s+a.step;h+=a.step/n.branchFactor)i(this.getTreeNode(t-1,h),l);u.minIndex=l.minIndex,u.min=l.min,u.maxIndex=l.maxIndex,u.max=l.max}},r.prototype.updateSegmentTree=function(){var t;for(t=0;t<this.tree.depth;t++)this.rotateTreeLevel(t);for(t=0;t<this.tree.depth;t++)this.populateTreeLevel(this.historyBuffer.lastUpdatedIndex,t)},r.prototype.readMinMax=function(t,n,r){var a,s=n-t,h=this.historyBuffer,l=h.startIndex(),u=this.cbuffer,d=Math.floor(Math.log(s)/Math.log(h.branchFactor));if(d<=0){for(a=t;a<n;a++)e(a,u.get(a-l),r);return r}d>this.tree.levels.length&&(d=this.tree.levels.length);var c=Math.pow(h.branchFactor,d),f=Math.ceil(t/c)*c,p=o(n,c);t!==f&&this.readMinMax(t,f,r);var g=o(l,c),m=(f-g)/c,v=(p-g)/c;for(a=m;a<v;a++)i(this.tree.levels[d-1].nodes.get(a),r);return n!==p&&this.readMinMax(p,n,r),r},r.prototype.query=function(t,e,i){var o,r=this.historyBuffer;t=Math.floor(t),e=Math.ceil(e);var a=[],s=r.startIndex(),h=r.lastIndex();if(t<s&&(t=s),t>h&&(t=h),e<s&&(e=s-1),e>h-1&&(e=h-1),i<4)for(o=t;o<=e;o++)a.push(o),a.push(this.get(o));else{var l,u,d=new n;for(o=t;o<=e;o=Math.round(o+i)){var c=Math.min(e+1,Math.round(o+i));d.max=Number.NEGATIVE_INFINITY,d.min=Number.POSITIVE_INFINITY,d.minIndex=0,d.maxIndex=0,d=this.readMinMax(o,c,d),l=d.maxIndex,u=d.minIndex,u===l?(a.push(u),a.push(d.min)):u<l?(a.push(u),a.push(d.min),a.push(l),a.push(d.max)):(a.push(l),a.push(d.max),a.push(u),a.push(d.min))}}return a},"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=r:t.SegmentTree=r}(window),function(t){function e(t,e,n,r){var a;if(e.historyBuffer){var s=e.historyBuffer;a=s.indexMap;var h,l=t.getData().indexOf(e);l<s.width?(h=i(s,l),e.index=l):h=[];for(var u=r.points,d=0;d<h.length;d+=2)u[d]=a?a[h[d]]:h[d],u[d+1]=h[d+1];u.length=h.length,r.pointsize=2,e.decimate=o,e.decimatePoints=o}}function i(t,e){var i=t.rangeX(e),o=[];return void 0===i.xmin||void 0===i.xmax||void 0===i.deltamin?[]:(o[0]=i.xmin,o[2]=i.xmax,o[4]=i.xmax-i.deltamin,o[1]=0,o[3]=1,o[5]=2,o)}function o(t,e,i,o){var n,r=t.historyBuffer,a=i-e,s=r.indexMap,h=t.datapoints,l=Math.floor(a/o),u=t.index;if(u<r.width)var n=t.historyBuffer.query(e,i,l,u);else n=[];for(var d=h.points,c=0;c<n.length;c+=2)d[c]=s?s[n[c]]:n[c],d[c+1]=n[c+1];return d.length=n.length,h.pointsize=2,d}function n(t,e){for(var i=t.getData(),o=0;o<e.width;o++)"object"===_typeof(i[o])?(i[o].data=[],i[o].datapoints=void 0):i[o]={data:[]};t.setData(i)}function r(t,e,i){e.datapoints.points&&(i.xmin=e.datapoints.points[0])}function a(t,e){if("y"===e.direction&&"none"!==e.options.autoScale){var i,o,n,r,a,s=t.getData(),h=s.filter(function(t){return t.yaxis===e}),l=h.length;for(i=0;i<l;i++)a=h[i].index,o=h[i].xaxis.min?h[i].xaxis.min:h[i].xaxis.options.min,n=h[i].xaxis.max?h[i].xaxis.max:h[i].xaxis.options.max,i<h[i].historyBuffer.width&&(r=h[i].historyBuffer.rangeY(o,n,a),0===i?(e.datamin=r.ymin,e.datamax=r.ymax):(e.datamin=Math.min(e.datamin,r.ymin)||void 0,e.datamax=Math.max(e.datamax,r.ymax)||void 0))}}function s(t){t.setupGrid(!0),t.draw()}function h(t){function i(t,e){t.dataUpdateTriggered||(t.dataUpdateTriggered=requestAnimationFrame(function(){o||(n(t,e),s(t)),t.dataUpdateTriggered=null}))}var o=!1;t.hooks.processOptions.push(function(t){var s=t.getOptions().series.historyBuffer;s&&(t.hooks.processRawData.push(e),s.registerOnChange("setDataCallback",function(){i(t,s)}),n(t,s),t.hooks.adjustSeriesDataRange.push(r),t.hooks.setRange.push(a),t.hooks.shutdown.push(function(){s.deregisterOnChange("setDataCallback"),o=!0}))})}t.plot.plugins.push({init:h,name:"charting",version:"0.3"})}(jQuery);
//# sourceMappingURL=jquery.flot.plugins.js.map
